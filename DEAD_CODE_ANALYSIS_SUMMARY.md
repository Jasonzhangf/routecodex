# RouteCodex åºŸå¼ƒå‡½æ•°æ·±åº¦åˆ†ææ€»ç»“æŠ¥å‘Š

> **åˆ†æå®Œæˆæ—¶é—´**: 2025-10-31 09:44
> **åˆ†æå·¥å…·**: Sysmem + DeadCodeAnalyzer
> **é¡¹ç›®ç‰ˆæœ¬**: feature/llmswitch-migration

## ğŸ¯ åˆ†æç›®æ ‡è¾¾æˆæƒ…å†µ

### âœ… å·²å®Œæˆçš„æ·±åº¦åˆ†æä»»åŠ¡
1. **å‡½æ•°å®šä¹‰æ‰«æ** - æ‰«æäº†532ä¸ªæºæ–‡ä»¶ä¸­çš„4,318ä¸ªå‡½æ•°å®šä¹‰
2. **è°ƒç”¨å…³ç³»åˆ†æ** - åˆ†æäº†å‡½æ•°é—´çš„è°ƒç”¨å’Œå¼•ç”¨å…³ç³»
3. **æœªä½¿ç”¨ä»£ç è¯†åˆ«** - è¯†åˆ«äº†73ä¸ªæœªä½¿ç”¨çš„å¯¼å‡ºå‡½æ•°
4. **æ­»ä»£ç æ£€æµ‹** - æ£€æµ‹äº†8,003ä¸ªæ­»ä»£ç å—
5. **ç±»å‹å®šä¹‰åˆ†æ** - åˆ†æäº†173ä¸ªç±»å‹å®šä¹‰ï¼Œ68ä¸ªæœªä½¿ç”¨
6. **å¸¸é‡ä½¿ç”¨åˆ†æ** - åˆ†æäº†230ä¸ªå¸¸é‡ï¼Œ37ä¸ªæœªä½¿ç”¨
7. **æ¸…ç†è®¡åˆ’åˆ¶å®š** - åˆ¶å®šäº†ä¸‰é˜¶æ®µæ¸…ç†è®¡åˆ’å’Œå®‰å…¨æªæ–½

## ğŸ“Š å…³é”®æ•°æ®ç»Ÿè®¡

| ç±»åˆ« | æ€»æ•° | æœªä½¿ç”¨ | å æ¯” | é£é™©ç­‰çº§ |
|------|------|--------|------|----------|
| **å‡½æ•°** | 4,318 | 73 | 1.69% | ä¸­ç­‰ |
| **å¸¸é‡** | 230 | 37 | 16.09% | ä½-ä¸­ç­‰ |
| **ç±»å‹** | 173 | 68 | 39.31% | ä½-é«˜ |
| **å¯¼å…¥** | - | 164 | - | ä½ |
| **æ­»ä»£ç å—** | - | 8,003 | - | ä½ |

## ğŸš¨ é‡ç‚¹å‘ç°

### 1. é«˜é£é™©æœªä½¿ç”¨å‡½æ•°ï¼ˆéœ€è¦è°¨æ…å¤„ç†ï¼‰
- `dryRunCommands` - CLIå‘½ä»¤å…¥å£ç‚¹ï¼Œå¯èƒ½è¢«å¤–éƒ¨è°ƒç”¨
- `createQwenOAuth` - OAuthé›†æˆï¼Œå¯èƒ½è¢«åŠ¨æ€åŠ è½½
- `createIFlowOAuth` - OAuthé›†æˆï¼Œå¯èƒ½è¢«åŠ¨æ€åŠ è½½
- é…ç½®ç›¸å…³å‡½æ•° - å¯èƒ½è¢«é…ç½®ç³»ç»ŸåŠ¨æ€è°ƒç”¨

### 2. ä¸­ç­‰é£é™©æœªä½¿ç”¨ä»£ç 
- **æ—¥å¿—ç³»ç»Ÿå¸¸é‡** - `DEFAULT_CONFIG`, `FILE_LOG_CONSTANTS` ç­‰
- **å·¥å…·å‡½æ•°** - `quickValidateLogContent`, `getErrorMessage` ç­‰
- **éªŒè¯å™¨å‡½æ•°** - å„ç§éªŒè¯å’Œè§„èŒƒåŒ–å‡½æ•°

### 3. ä½é£é™©æ¸…ç†ç›®æ ‡
- **æœªä½¿ç”¨çš„å¯¼å…¥** (164ä¸ª) - å¯ä»¥å®‰å…¨ç§»é™¤
- **æ­»ä»£ç å—** (8,003ä¸ª) - ä¸»è¦æ˜¯return/throwåçš„ä»£ç 
- **ä¸´æ—¶å¸¸é‡** - æµ‹è¯•å’Œè°ƒè¯•ç›¸å…³çš„å¸¸é‡

## ğŸ—‚ï¸ åºŸå¼ƒå‡½æ•°åˆ†ç±»æ¸…å•

### A. ç«‹å³å¯æ¸…ç†ï¼ˆä½é£é™©ï¼‰
```typescript
// å·¥å…·å‡½æ•°
- getErrorMessage()           // src/utils/error-handling-utils.ts:11
- buildAuthHeaders()         // src/modules/pipeline/modules/provider/shared/provider-helpers.ts:3
- isRetryableError()         // src/modules/pipeline/modules/provider/shared/provider-helpers.ts:27

// éªŒè¯å‡½æ•°
- quickValidateLogContent()  // src/logging/parser/index.ts:177
- quickValidateLogEntry()    // src/logging/validator/DataValidator.ts:1051

// å¸¸é‡
- FILE_LOG_CONSTANTS         // src/logging/constants.ts:60
- CONSOLE_LOG_CONSTANTS      // src/logging/constants.ts:92
- SENSITIVE_FIELDS           // src/modules/pipeline/utils/oauth-helpers.ts:6
```

### B. éœ€è¦æµ‹è¯•åæ¸…ç†ï¼ˆä¸­ç­‰é£é™©ï¼‰
```typescript
// ç³»ç»Ÿæç¤ºç›¸å…³
- shouldReplaceSystemPrompt()           // src/utils/system-prompt-loader.ts:219
- replaceSystemInOpenAIMessages()      // src/utils/system-prompt-loader.ts:226

// è§„èŒƒåŒ–å‡½æ•°
- normalizeArgsBySchema()              // src/modules/pipeline/utils/schema-arg-normalizer.ts:107
- sanitizeAndValidateOpenAIChat()      // src/modules/pipeline/utils/preflight-validator.ts:189

// è½¬æ¢å·¥å…·
- extractToolText()                    // src/modules/pipeline/utils/tool-result-text.ts:11
- harvestToolCallsFromText()           // src/modules/pipeline/modules/compatibility/glm-utils/text-to-toolcalls.ts:168
```

### C. éœ€è¦æ·±å…¥åˆ†æï¼ˆé«˜é£é™©ï¼‰
```typescript
// CLIå’Œå‘½ä»¤
- dryRunCommands()                     // src/commands/dry-run.ts:1227

// OAuthé›†æˆ
- createQwenOAuth()                    // src/modules/pipeline/modules/provider/qwen-oauth.ts:483
- createIFlowOAuth()                   // src/modules/pipeline/modules/provider/iflow-oauth.ts:722

// é…ç½®ç³»ç»Ÿ
- DEFAULT_UNIMPLEMENTED_CONFIG         // dist/config/unimplemented-config-types.js:10
- UNIMPLEMENTED_CONFIG_PRESETS         // dist/config/unimplemented-config-types.js:40
```

## ğŸ› ï¸ æ¸…ç†å·¥å…·å’Œè„šæœ¬

### 1. è‡ªåŠ¨åŒ–åˆ†æè„šæœ¬
- **dead-code-analyzer.cjs** - æ·±åº¦åˆ†æè„šæœ¬ï¼Œè¯†åˆ«æœªä½¿ç”¨ä»£ç 
- **dead-code-analysis-report.json** - è¯¦ç»†åˆ†æç»“æœ

### 2. æ¸…ç†æ‰§è¡Œè„šæœ¬
- **scripts/cleanup-unused-code.sh** - è‡ªåŠ¨åŒ–æ¸…ç†è„šæœ¬
- **scripts/verify-cleanup-safety.sh** - å®‰å…¨éªŒè¯è„šæœ¬

### 3. ä½¿ç”¨æ–¹æ³•
```bash
# 1. å®‰å…¨éªŒè¯
./scripts/verify-cleanup-safety.sh

# 2. æ‰§è¡Œæ¸…ç†
./scripts/cleanup-unused-code.sh all

# 3. åˆ†é˜¶æ®µæ¸…ç†
./scripts/cleanup-unused-code.sh imports  # æ¸…ç†å¯¼å…¥
./scripts/cleanup-unused-code.sh test     # è¿è¡Œæµ‹è¯•
```

## ğŸ“‹ ä¸‰é˜¶æ®µæ¸…ç†è®¡åˆ’

### ç¬¬ä¸€é˜¶æ®µï¼šä½é£é™©æ¸…ç†ï¼ˆç«‹å³æ‰§è¡Œï¼‰
**ç›®æ ‡**: æ¸…ç†æ˜æ˜¾çš„æœªä½¿ç”¨ä»£ç 
**é¢„è®¡æ¸…ç†**: ~2000è¡Œä»£ç 
**é£é™©ç­‰çº§**: ä½

#### æ¸…ç†å†…å®¹
- 164ä¸ªæœªä½¿ç”¨çš„å¯¼å…¥
- 5000ä¸ªæ˜æ˜¾çš„æ­»ä»£ç å—
- 15ä¸ªæœªä½¿ç”¨çš„å¸¸é‡
- 10ä¸ªå·¥å…·å‡½æ•°

#### æ‰§è¡Œæ­¥éª¤
1. è¿è¡Œå®‰å…¨éªŒè¯è„šæœ¬
2. æ‰§è¡Œä½é£é™©æ¸…ç†
3. è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶
4. æäº¤å˜æ›´

### ç¬¬äºŒé˜¶æ®µï¼šä¸­ç­‰é£é™©æ¸…ç†ï¼ˆéœ€è¦æµ‹è¯•ï¼‰
**ç›®æ ‡**: æ¸…ç†å¯èƒ½è¢«é—´æ¥ä½¿ç”¨çš„ä»£ç 
**é¢„è®¡æ¸…ç†**: ~1500è¡Œä»£ç 
**é£é™©ç­‰çº§**: ä¸­ç­‰

#### æ¸…ç†å†…å®¹
- 25ä¸ªå·¥å…·å‡½æ•°
- 40ä¸ªç±»å‹å®šä¹‰
- 15ä¸ªé…ç½®å¸¸é‡
- å‰©ä½™çš„æ­»ä»£ç å—

#### æ‰§è¡Œæ­¥éª¤
1. åˆ›å»ºç‰¹æ€§åˆ†æ”¯
2. é€ä¸ªç§»é™¤å‡½æ•°å¹¶æµ‹è¯•
3. é›†æˆæµ‹è¯•
4. æ€§èƒ½æµ‹è¯•

### ç¬¬ä¸‰é˜¶æ®µï¼šé«˜é£é™©æ¸…ç†ï¼ˆéœ€è¦å…¨é¢æµ‹è¯•ï¼‰
**ç›®æ ‡**: æ¸…ç†å¯èƒ½åŠ¨æ€è°ƒç”¨çš„ä»£ç 
**é¢„è®¡æ¸…ç†**: ~1000è¡Œä»£ç 
**é£é™©ç­‰çº§**: é«˜

#### æ¸…ç†å†…å®¹
- 10ä¸ªå¯èƒ½åŠ¨æ€è°ƒç”¨çš„å‡½æ•°
- 15ä¸ªæ ¸å¿ƒé…ç½®ç±»å‹
- 8ä¸ªå¤æ‚çš„å·¥å…·å‡½æ•°

#### æ‰§è¡Œæ­¥éª¤
1. æ·±åº¦åˆ†æè°ƒç”¨å…³ç³»
2. ä¿å®ˆæ¸…ç†ç­–ç•¥
3. å…¨é¢æµ‹è¯•
4. ç›‘æ§è¿è¡ŒçŠ¶æ€

## ğŸ”’ å®‰å…¨ä¿éšœæªæ–½

### 1. ç‰ˆæœ¬æ§åˆ¶
- æ¯ä¸ªé˜¶æ®µåˆ›å»ºç‹¬ç«‹åˆ†æ”¯
- å®šæœŸæäº¤å’Œæ¨é€è¿›åº¦
- ä¿æŒå›æ»šèƒ½åŠ›

### 2. æµ‹è¯•ä¿éšœ
- å•å…ƒæµ‹è¯•è¦†ç›–ç‡æ£€æŸ¥
- é›†æˆæµ‹è¯•éªŒè¯
- ç«¯åˆ°ç«¯æµ‹è¯•
- æ€§èƒ½åŸºå‡†æµ‹è¯•

### 3. ç›‘æ§æœºåˆ¶
- CI/CDç®¡é“ç›‘æ§
- ä»£ç è´¨é‡æ£€æŸ¥
- æ„å»ºæ—¶é—´ç›‘æ§
- è¿è¡Œæ—¶æ€§èƒ½ç›‘æ§

## ğŸ“ˆ é¢„æœŸæ”¶ç›Š

### ä»£ç è´¨é‡æå‡
- **å‡å°‘ä»£ç é‡**: ~4500è¡Œ (çº¦10%)
- **æé«˜å¯ç»´æŠ¤æ€§**: ç§»é™¤å†—ä½™ä»£ç 
- **é™ä½å¤æ‚åº¦**: ç®€åŒ–ä¾èµ–å…³ç³»
- **æå‡å¯è¯»æ€§**: ä¸“æ³¨äºæ´»è·ƒä»£ç 

### æ€§èƒ½ä¼˜åŒ–
- **å‡å°‘åŒ…ä½“ç§¯**: ç§»é™¤æœªä½¿ç”¨ä»£ç 
- **æå‡ç¼–è¯‘é€Ÿåº¦**: æ›´å°‘ä»£ç éœ€è¦å¤„ç†
- **é™ä½å†…å­˜å ç”¨**: å‡å°‘è¿è¡Œæ—¶åŠ è½½
- **æé«˜å¯åŠ¨é€Ÿåº¦**: æ›´ç®€æ´çš„åˆå§‹åŒ–

### å¼€å‘ä½“éªŒæ”¹å–„
- **æ›´å¥½çš„IDEæ”¯æŒ**: ç§»é™¤æœªä½¿ç”¨ç±»å‹
- **æ›´å¿«çš„ä»£ç æœç´¢**: å‡å°‘å™ªéŸ³ç»“æœ
- **æ›´æ¸…æ™°çš„é¡¹ç›®ç»“æ„**: ä¸“æ³¨æ ¸å¿ƒåŠŸèƒ½
- **æ›´å¥½çš„æ–°äººä¸Šæ‰‹**: å‡å°‘ç†è§£è´Ÿæ‹…

## ğŸ”„ æŒç»­ç»´æŠ¤å»ºè®®

### 1. é¢„é˜²æªæ–½
- åœ¨CI/CDä¸­é›†æˆæ­»ä»£ç æ£€æµ‹
- ä»£ç å®¡æŸ¥æ—¶å…³æ³¨æœªä½¿ç”¨ä»£ç 
- å®šæœŸæ‰§è¡ŒåºŸå¼ƒä»£ç åˆ†æ

### 2. å·¥å…·é›†æˆ
```json
// package.json å»ºè®®æ·»åŠ çš„è„šæœ¬
{
  "scripts": {
    "analyze:dead-code": "node dead-code-analyzer.cjs",
    "cleanup:safety": "./scripts/verify-cleanup-safety.sh",
    "cleanup:unused": "./scripts/cleanup-unused-code.sh all",
    "cleanup:imports": "./scripts/cleanup-unused-code.sh imports"
  }
}
```

### 3. ç›‘æ§æŒ‡æ ‡
- æ¯æœˆæœªä½¿ç”¨å‡½æ•°æ•°é‡è¶‹åŠ¿
- ä»£ç è¦†ç›–ç‡å˜åŒ–
- æ„å»ºæ—¶é—´å˜åŒ–
- åŒ…ä½“ç§¯å˜åŒ–

## ğŸ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ¨è®¡åˆ’

### ç«‹å³è¡ŒåŠ¨ï¼ˆä»Šå¤©ï¼‰
1. **è¿è¡Œå®‰å…¨éªŒè¯**
   ```bash
   ./scripts/verify-cleanup-safety.sh
   ```

2. **æ‰§è¡Œç¬¬ä¸€é˜¶æ®µæ¸…ç†**
   ```bash
   ./scripts/cleanup-unused-code.sh imports
   ./scripts/cleanup-unused-code.sh dead-code
   ```

3. **éªŒè¯æ¸…ç†ç»“æœ**
   ```bash
   npm test && npm run build
   ```

### æœ¬å‘¨å†…å®Œæˆ
1. **æ‰§è¡Œç¬¬äºŒé˜¶æ®µæ¸…ç†**
   - åˆ›å»ºç‰¹æ€§åˆ†æ”¯
   - é€ä¸ªæ¸…ç†ä¸­ç­‰é£é™©å‡½æ•°
   - è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶

2. **ä»£ç å®¡æŸ¥å’Œåˆå¹¶**
   - åˆ›å»ºPull Request
   - å›¢é˜ŸCode Review
   - åˆå¹¶åˆ°ä¸»åˆ†æ”¯

### æœ¬æœˆå†…å®Œæˆ
1. **è¯„ä¼°ç¬¬ä¸‰é˜¶æ®µæ¸…ç†**
   - æ·±åº¦åˆ†æé«˜é£é™©å‡½æ•°
   - åˆ¶å®šä¿å®ˆæ¸…ç†ç­–ç•¥
   - æ‰§è¡Œæ¸…ç†å¹¶ç›‘æ§

2. **å»ºç«‹æŒç»­ç›‘æ§**
   - é›†æˆåˆ°CI/CDç®¡é“
   - è®¾ç½®å®šæœŸåˆ†æä»»åŠ¡
   - å»ºç«‹ç›‘æ§ä»ªè¡¨æ¿

## ğŸ“ æ”¯æŒå’Œè”ç³»

å¦‚æœåœ¨ä½¿ç”¨æ¸…ç†è„šæœ¬æˆ–æ‰§è¡Œæ¸…ç†è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œè¯·å‚è€ƒï¼š

1. **è¯¦ç»†æŠ¥å‘Š**: `DEAD_CODE_CLEANUP_PLAN.md`
2. **åˆ†ææ•°æ®**: `dead-code-analysis-report.json`
3. **æ¸…ç†è„šæœ¬**: `scripts/cleanup-unused-code.sh`
4. **å®‰å…¨éªŒè¯**: `scripts/verify-cleanup-safety.sh`

---

**ç”Ÿæˆå·¥å…·**: Sysmem + DeadCodeAnalyzer v1.0
**åˆ†ææ—¶é—´**: 2025-10-31T09:44:11.521Z
**é¡¹ç›®è·¯å¾„**: /Users/fanzhang/Documents/github/routecodex-worktree/dev
**åˆ†æç‰ˆæœ¬**: feature/llmswitch-migration

**å…è´£å£°æ˜**: æœ¬åˆ†æåŸºäºé™æ€ä»£ç åˆ†æï¼Œå¯èƒ½å­˜åœ¨è¯¯åˆ¤ã€‚è¯·åœ¨æ‰§è¡Œæ¸…ç†å‰è¿›è¡Œäººå·¥å®¡æ ¸ï¼Œç‰¹åˆ«æ˜¯é«˜é£é™©é¡¹ç›®çš„æ¸…ç†ã€‚