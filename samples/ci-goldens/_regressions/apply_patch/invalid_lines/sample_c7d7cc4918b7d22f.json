{
  "id": "sample_c7d7cc4918b7d22f",
  "timestamp": "2026-01-16T02:04:01.361Z",
  "errorType": "invalid_lines",
  "originalArgs": "{\"file\":\"scripts/xiaohongshu/tests/phase1-4-full-collect.mjs\",\"instructions\":\"修复两个问题：1) systemMouseWheel 的 WS 回退路径添加 profile 字段；2) 移除 ScrollSearchPage 中错误的滚动前底部检测\",\"changes\":[{\"kind\":\"replace\",\"anchor\":\"  await browserServiceWsCommand(PROFILE, {\\n    command_type: 'user_action',\\n    action: 'operation',\\n    parameters: {\\n      operation_type: 'scroll',\\n      ...(coordinates ? { target: { coordinates } } : {}),\\n      deltaY: dy,\\n    },\\n  });\",\"target\":\"  await browserServiceWsCommand(PROFILE, {\\n    command_type: 'user_action',\\n    action: 'operation',\\n    parameters: {\\n      profile: PROFILE,\\n      operation_type: 'scroll',\\n      ...(coordinates ? { target: { coordinates } } : {}),\\n      deltaY: dy,\\n    },\\n  });\"},{\"kind\":\"replace\",\"anchor\":\"  // 通过列表锚点定位滚动落点（坐标），使用系统滚轮事件；禁止 JS scroll 兜底\\n  const anchorBefore = await verifySearchListAnchor();\\n  let coordinates = null;\\n  if (anchorBefore?.found && anchorBefore.rect) {\\n    const rect = anchorBefore.rect;\\n    const viewportH = Number(before?.viewport?.h) || 0;\\n    const viewportW = Number(before?.viewport?.w) || 0;\\n    const rawX = rect.x + rect.width / 2;\\n    const rawY = rect.y + rect.height / 2;\\n    const x = viewportW ? Math.min(Math.max(40, rawX), viewportW - 40) : rawX;\\n    const y = viewportH ? Math.min(Math.max(120, rawY), viewportH - 120) : rawY;\\n    coordinates = { x, y };\",\"target\":\"  // 通过列表锚点定位滚动落点（坐标），使用系统滚轮事件；禁止 JS scroll 兜底\\n  const anchorBefore = await verifySearchListAnchor();\\n  let coordinates = null;\\n  if (anchorBefore?.found && anchorBefore.rect) {\\n    const rect = anchorBefore.rect;\\n    const viewportH = Number(before?.viewport?.h) || 0;\\n    const viewportW = Number(before?.viewport?.w) || 0;\\n    const rawX = rect.x + rect.width / 2;\\n    const rawY = rect.y + rect.height / 2;\\n    const x = viewportW ? Math.min(Math.max(40, rawX), viewportW - 40) : rawX;\\n    const y = viewportH ? Math.min(Math.max(120, rawY), viewportH - 120) : rawY;\\n    coordinates = { x, y };\"}]}",
  "normalizedArgs": "{\"file\":\"scripts/xiaohongshu/tests/phase1-4-full-collect.mjs\",\"instructions\":\"修复两个问题：1) systemMouseWheel 的 WS 回退路径添加 profile 字段；2) 移除 ScrollSearchPage 中错误的滚动前底部检测\",\"changes\":[{\"kind\":\"replace\",\"anchor\":\"  await browserServiceWsCommand(PROFILE, {\\n    command_type: 'user_action',\\n    action: 'operation',\\n    parameters: {\\n      operation_type: 'scroll',\\n      ...(coordinates ? { target: { coordinates } } : {}),\\n      deltaY: dy,\\n    },\\n  });\",\"target\":\"  await browserServiceWsCommand(PROFILE, {\\n    command_type: 'user_action',\\n    action: 'operation',\\n    parameters: {\\n      profile: PROFILE,\\n      operation_type: 'scroll',\\n      ...(coordinates ? { target: { coordinates } } : {}),\\n      deltaY: dy,\\n    },\\n  });\"},{\"kind\":\"replace\",\"anchor\":\"  // 通过列表锚点定位滚动落点（坐标），使用系统滚轮事件；禁止 JS scroll 兜底\\n  const anchorBefore = await verifySearchListAnchor();\\n  let coordinates = null;\\n  if (anchorBefore?.found && anchorBefore.rect) {\\n    const rect = anchorBefore.rect;\\n    const viewportH = Number(before?.viewport?.h) || 0;\\n    const viewportW = Number(before?.viewport?.w) || 0;\\n    const rawX = rect.x + rect.width / 2;\\n    const rawY = rect.y + rect.height / 2;\\n    const x = viewportW ? Math.min(Math.max(40, rawX), viewportW - 40) : rawX;\\n    const y = viewportH ? Math.min(Math.max(120, rawY), viewportH - 120) : rawY;\\n    coordinates = { x, y };\",\"target\":\"  // 通过列表锚点定位滚动落点（坐标），使用系统滚轮事件；禁止 JS scroll 兜底\\n  const anchorBefore = await verifySearchListAnchor();\\n  let coordinates = null;\\n  if (anchorBefore?.found && anchorBefore.rect) {\\n    const rect = anchorBefore.rect;\\n    const viewportH = Number(before?.viewport?.h) || 0;\\n    const viewportW = Number(before?.viewport?.w) || 0;\\n    const rawX = rect.x + rect.width / 2;\\n    const rawY = rect.y + rect.height / 2;\\n    const x = viewportW ? Math.min(Math.max(40, rawX), viewportW - 40) : rawX;\\n    const y = viewportH ? Math.min(Math.max(120, rawY), viewportH - 120) : rawY;\\n    coordinates = { x, y };\"}]}",
  "validationError": "invalid_lines",
  "source": "tool-registry.validateToolCall"
}