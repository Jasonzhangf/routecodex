{
  "url": "/v1/responses",
  "endpoint": "/v1/responses",
  "meta": {
    "stage": "client-request",
    "entryEndpoint": "/v1/responses",
    "stream": false
  },
  "headers": {
    "accept": "application/json",
    "content-type": "application/json"
  },
  "body": {
    "body": {
      "model": "gpt-5.1",
      "stream": false,
      "tool_choice": "auto",
      "input": [
        {
          "type": "message",
          "role": "user",
          "content": [
            {
              "type": "input_text",
              "text": "回归样本：验证 apply_patch 工具 schema 必须是 JSON 且 required 包含 input。"
            }
          ]
        },
        {
          "type": "function_call",
          "call_id": "fc_apply_patch_1",
          "name": "apply_patch",
          "arguments": {}
        }
      ],
      "tools": [
        {
          "type": "custom",
          "name": "apply_patch",
          "description": "Use the `apply_patch` tool to edit files. This is a FREEFORM tool, so do not wrap the patch in JSON.",
          "format": {
            "type": "grammar",
            "syntax": "lark",
            "definition": "start: begin_patch hunk+ end_patch\nbegin_patch: \"*** Begin Patch\" LF\nend_patch: \"*** End Patch\" LF?\n\nhunk: add_hunk | delete_hunk | update_hunk\nadd_hunk: \"*** Add File: \" filename LF add_line+\ndelete_hunk: \"*** Delete File: \" filename LF\nupdate_hunk: \"*** Update File: \" filename LF change_move? change?\n\nfilename: /(.+)/\nadd_line: \"+\" /(.*)/ LF -> line\n\nchange_move: \"*** Move to: \" filename LF\nchange: (change_context | change_line)+ eof_line?\nchange_context: (\"@@\" | \"@@ \" /(.+)/) LF\nchange_line: (\"+\" | \"-\" | \" \") /(.*)/ LF\neof_line: \"*** End of File\" LF\n\n%import common.LF\n"
          }
        },
        {
          "type": "function",
          "name": "shell_command",
          "description": "Runs a shell command and returns its output.",
          "parameters": {
            "type": "object",
            "properties": {
              "command": { "type": "string" },
              "workdir": { "type": "string" }
            },
            "required": ["command"],
            "additionalProperties": false
          }
        }
      ]
    }
  }
}
