{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "ResponsesConversionMapping",
  "type": "object",
  "required": ["request", "response", "tools"],
  "properties": {
    "request": {
      "type": "object",
      "required": ["instructionsPaths", "inputBlocks", "fallback"],
      "properties": {
        "instructionsPaths": { "type": "array", "items": { "type": "string" } },
        "inputBlocks": {
          "type": "object",
          "required": ["wrapperType", "typeKey", "roleKey", "blocksKey", "textKey", "allowedContentTypes"],
          "properties": {
            "wrapperType": { "type": "string" },
            "typeKey": { "type": "string" },
            "roleKey": { "type": "string" },
            "blocksKey": { "type": "string" },
            "textKey": { "type": "string" },
            "allowedContentTypes": { "type": "array", "items": { "type": "string" } },
            "ignoreRoles": { "type": "array", "items": { "type": "string" } },
            "dedupe": { "type": "boolean" },
            "dedupeDelimiter": { "type": "string" }
          },
          "additionalProperties": false
        },
        "fallback": {
          "type": "object",
          "required": ["useRawMessages", "rawMessagesPath", "pickLastUser"],
          "properties": {
            "useRawMessages": { "type": "boolean" },
            "rawMessagesPath": { "type": "string" },
            "pickLastUser": { "type": "boolean" },
            "dedupe": { "type": "boolean" },
            "dedupeDelimiter": { "type": "string" }
          },
          "additionalProperties": false
        },
        "systemContentPaths": { "type": "array", "items": { "type": "string" } },
        "systemJoiner": { "type": "string" }
      },
      "additionalProperties": false
    },
    "response": {
      "type": "object",
      "required": ["textPaths", "textArrayTextKey", "contentBlocksKey", "messageWrapperType"],
      "properties": {
        "textPaths": { "type": "array", "items": { "type": "string" } },
        "textArrayTextKey": { "type": "string" },
        "contentBlocksKey": { "type": "string" },
        "messageWrapperType": { "type": "string" },
        "passthroughFields": { "type": "array", "items": { "type": "string" } },
        "defaultValues": { "type": "object" }
      },
      "additionalProperties": false
    },
    "tools": {
      "type": "object",
      "required": ["toolCallTypes", "functionArgsPaths", "emitRequiredAction"],
      "properties": {
        "toolCallTypes": { "type": "array", "items": { "type": "string" } },
        "functionArgsPaths": { "type": "array", "items": { "type": "string" } },
        "emitRequiredAction": { "type": "boolean" }
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": false
}
