{
  "version": "2.0",
  "system": {
    "mode": "v2",
    "enableDryRun": false,
    "featureFlags": {
      "enableStaticInstances": true,
      "enableDynamicRouting": true,
      "enableHealthMonitoring": true
    }
  },
  "staticInstances": {
    "preloadModules": [
      "provider-openai",
      "provider-anthropic",
      "provider-glm",
      "provider-qwen",
      "compatibility-openai",
      "compatibility-anthropic",
      "compatibility-glm",
      "llmswitch-openai-openai",
      "llmswitch-anthropic-openai"
    ],
    "poolConfig": {
      "maxInstancesPerType": 10,
      "warmupInstances": 2,
      "idleTimeout": 300000,
      "healthCheckInterval": 60000
    }
  },
  "virtualPipelines": {
    "routeTable": {
      "routes": [
        {
          "id": "openai-gpt4-route",
          "name": "OpenAI GPT-4 Route",
          "pattern": {
            "provider": "openai",
            "model": "gpt-4.*"
          },
          "modules": [
            {
              "type": "provider-openai",
              "config": { "endpoint": "https://api.openai.com/v1" }
            },
            {
              "type": "compatibility-openai",
              "config": { "strictMode": false }
            },
            {
              "type": "llmswitch-openai-openai",
              "config": { "enableTools": true }
            }
          ],
          "enabled": true
        },
        {
          "id": "anthropic-claude-route",
          "name": "Anthropic Claude Route",
          "pattern": {
            "provider": "anthropic",
            "model": "claude-.*"
          },
          "modules": [
            {
              "type": "provider-anthropic",
              "config": { "endpoint": "https://api.anthropic.com" }
            },
            {
              "type": "compatibility-anthropic",
              "config": { "strictMode": true }
            },
            {
              "type": "llmswitch-anthropic-openai",
              "config": { "enableTools": true }
            }
          ],
          "enabled": true
        }
      ],
      "defaultRoute": "openai-gpt4-route"
    },
    "moduleRegistry": {
      "factories": {
        "provider-openai": "./factories/provider-openai-factory.js",
        "provider-anthropic": "./factories/provider-anthropic-factory.js",
        "compatibility-openai": "./factories/compatibility-openai-factory.js",
        "compatibility-anthropic": "./factories/compatibility-anthropic-factory.js",
        "llmswitch-openai-openai": "./factories/llmswitch-openai-factory.js",
        "llmswitch-anthropic-openai": "./factories/llmswitch-anthropic-factory.js"
      }
    }
  }
}
