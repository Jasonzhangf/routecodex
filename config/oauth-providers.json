{
  "pipeline": {
    "llmSwitch": {
      "type": "openai-passthrough",
      "config": {
        "protocol": "openai",
        "targetFormat": "qwen"
      }
    },
    "workflow": {
      "type": "streaming-control",
      "config": {
        "enableStreaming": true,
        "bufferSize": 1024,
        "timeout": 30000
      }
    },
    "compatibility": {
      "type": "qwen-compatibility",
      "config": {
        "toolsEnabled": true,
        "customRules": [
          {
            "id": "ensure-standard-tools-format",
            "transform": "mapping",
            "sourcePath": "tools",
            "targetPath": "tools",
            "mapping": {
              "type": "type",
              "function": "function"
            }
          }
        ]
      }
    },
    "provider": {
      "type": "qwen-provider",
      "config": {
        "type": "qwen",
        "baseUrl": "https://portal.qwen.ai/v1",
        "auth": {
          "oauth": {
            "clientId": "f0304373b74a44d2b584a3fb70ca9e56",
            "deviceCodeUrl": "https://chat.qwen.ai/api/v1/oauth2/device/code",
            "tokenUrl": "https://chat.qwen.ai/api/v1/oauth2/token",
            "scopes": ["openid", "profile", "email", "model.completion"],
            "tokenFile": "./qwen-token.json"
          }
        },
        "timeout": 60000,
        "retryAttempts": 3
      }
    }
  },
  "providers": {
    "qwen": {
      "type": "qwen-provider",
      "enabled": true,
      "baseUrl": "https://portal.qwen.ai/v1",
      "auth": {
        "oauth": {
          "clientId": "f0304373b74a44d2b584a3fb70ca9e56",
          "deviceCodeUrl": "https://chat.qwen.ai/api/v1/oauth2/device/code",
          "tokenUrl": "https://chat.qwen.ai/api/v1/oauth2/token",
          "scopes": ["openid", "profile", "email", "model.completion"],
          "tokenFile": "./qwen-token.json"
        }
      },
      "models": {
        "qwen-turbo": {
          "maxTokens": 32768,
          "temperature": 0.7
        },
        "qwen-max": {
          "maxTokens": 65536,
          "temperature": 0.7
        },
        "qwen-turbo-latest": {
          "maxTokens": 131072,
          "temperature": 0.7
        }
      }
    },
    "iflow": {
      "type": "iflow-http",
      "enabled": true,
      "baseUrl": "https://iflow.cn",
      "auth": {
        "oauth": {
          "clientId": "10009311001",
          "clientSecret": "4Z3YjXycVsQvyGF1etiNlIBB4RsqSDtW",
          "authUrl": "https://iflow.cn/oauth",
          "tokenUrl": "https://iflow.cn/oauth/token",
          "deviceCodeUrl": "https://iflow.cn/oauth/device/code",
          "scopes": ["openid", "profile", "api"],
          "tokenFile": "./iflow-token.json",
          "credentialsFile": "./iflow-credentials.json"
        }
      },
      "models": {
        "iflow-turbo": {
          "maxTokens": 32768,
          "temperature": 0.7
        },
        "iflow-pro": {
          "maxTokens": 65536,
          "temperature": 0.7
        },
        "iflow-turbo-latest": {
          "maxTokens": 131072,
          "temperature": 0.7
        }
      }
    }
  },
  "dynamicRouting": {
    "default": {
      "targets": [
        {
          "providerId": "qwen",
          "modelId": "qwen-turbo"
        }
      ]
    },
    "longcontext": {
      "targets": [
        {
          "providerId": "qwen",
          "modelId": "qwen-max"
        },
        {
          "providerId": "iflow",
          "modelId": "iflow-pro"
        }
      ]
    },
    "thinking": {
      "targets": [
        {
          "providerId": "qwen",
          "modelId": "qwen-max"
        }
      ]
    },
    "background": {
      "targets": [
        {
          "providerId": "qwen",
          "modelId": "qwen-turbo"
        }
      ]
    },
    "websearch": {
      "targets": [
        {
          "providerId": "qwen",
          "modelId": "qwen-turbo-latest"
        }
      ]
    },
    "vision": {
      "targets": [
        {
          "providerId": "qwen",
          "modelId": "qwen-max"
        }
      ]
    },
    "coding": {
      "targets": [
        {
          "providerId": "iflow",
          "modelId": "iflow-pro"
        }
      ]
    }
  }
}
