{"id":"routecodex-1","title":"Epic: Antigravity å¯¹é½ï¼ˆé˜¶æ®µä¸€å‰©ä½™ + transport/tool schemaï¼‰","description":"ä» task.md è¿ç§»ï¼šAntigravity å¯¹é½ï¼ˆé˜¶æ®µä¸€ï¼‰ä»åœ¨è¿›è¡Œä¸­çš„æ¡ç›®ï¼ˆğŸŸ¡ï¼‰ï¼Œä»¥åŠä¸å…¶å¼ºç›¸å…³çš„ transport/tool schema æ”¶æ•›ä»»åŠ¡ã€‚\\n\\néªŒæ”¶ï¼š\\n- A5/A6/A7/D1 ç­‰å¯¹é½é¡¹æœ‰å¯å›æ”¾éªŒè¯ï¼ˆsamples dry-run/blackboxï¼‰\\n- ç›¸å…³è·¯ç”±/é…é¢ç­–ç•¥åªé€šè¿‡ quotaView äº§å‡ºï¼Œä¸å†ä¾èµ– router-local health","status":"open","priority":0,"issue_type":"epic","owner":"bot@routecodex.com","created_at":"2026-02-03T12:34:06.69878+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T12:34:06.69878+08:00"}
{"id":"routecodex-1.1","title":"Antigravityï¼šA5 Endpoint/è·¯å¾„æ„é€ ","description":"å¯¹é½ Antigravity Tools æœ€æ–°è·¯å¾„æ„é€ ï¼ˆ/v1internal:generateContent | :streamGenerateContentï¼‰ã€‚å‚è€ƒï¼šsrc/client/gemini-cli/gemini-cli-protocol-client.ts + Antigravity-Manager upstream client.rsã€‚éªŒæ”¶ï¼šå›æ”¾å¯¹æ¯” URL/path ä¸ upstream ä¸€è‡´","status":"open","priority":1,"issue_type":"task","owner":"bot@routecodex.com","created_at":"2026-02-03T12:35:29.766493+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T12:35:29.766493+08:00","dependencies":[{"issue_id":"routecodex-1.1","depends_on_id":"routecodex-1","type":"parent-child","created_at":"2026-02-03T19:28:31.390859+08:00","created_by":"import"}]}
{"id":"routecodex-1.10","title":"Antigravityï¼šReasoning/Thinking å—ç­–ç•¥ï¼ˆClaude via Antigravityï¼‰éªŒæ”¶","description":"é»˜è®¤å¯¹ antigravity.* + claude-* å»é™¤ \u003cthink\u003e/\u003creflection\u003eï¼Œå…è®¸ keep_thinking/keep_reasoning opt-inã€‚éªŒæ”¶ï¼šå›å½’æ ·æœ¬ + å¼€å…³è¡Œä¸ºç¨³å®š","status":"open","priority":1,"issue_type":"task","owner":"bot@routecodex.com","created_at":"2026-02-03T12:35:30.84796+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T12:35:30.84796+08:00","dependencies":[{"issue_id":"routecodex-1.10","depends_on_id":"routecodex-1","type":"parent-child","created_at":"2026-02-03T19:28:31.391484+08:00","created_by":"import"}]}
{"id":"routecodex-1.11","title":"Antigravity IDE: æœ¬åœ°é€ä¼ ä»£ç†æœ€å°å®ç°ï¼ˆè®°å½•+è½¬å‘ï¼‰","description":"ä¸º Antigravity IDE æä¾›ä¸€ä¸ªæœ¬åœ° forward proxyï¼ˆHTTP + CONNECTï¼‰ç”¨äº best-effort é€ä¼ ä¸è®°å½•ï¼ˆè‡³å°‘è®°å½• CONNECT ç›®æ ‡/è€—æ—¶/å­—èŠ‚æ•°ï¼›è‹¥æœ‰æ˜æ–‡ HTTP ä¹Ÿè®°å½• method/url/statusï¼‰ã€‚ä¸ä¿®æ”¹ RouteCodex ä¸»é“¾è·¯ï¼Œåªä½œä¸º scripts å·¥å…·ã€‚","acceptance_criteria":"- æä¾› scripts å¯æ‰§è¡Œå…¥å£ï¼šå¯åŠ¨æœ¬åœ°ä»£ç†ç«¯å£ï¼ˆé»˜è®¤ 127.0.0.1:8080ï¼‰\\n- æ”¯æŒ CONNECT éš§é“è½¬å‘å¹¶è®°å½•ç›®æ ‡ host:port + å­—èŠ‚è®¡æ•°\\n- æ”¯æŒæ˜æ–‡ HTTP proxy è¯·æ±‚å¹¶è®°å½• method/url/statusï¼ˆå¯é€‰è®°å½• bodyï¼Œå¿…é¡»è„±æ• Authorization/Cookieï¼‰\\n- æä¾› docsï¼šå¦‚ä½•åœ¨ Antigravity settings.json é…ç½® http.proxy å¹¶éªŒè¯æ˜¯å¦ç”Ÿæ•ˆ\\n- ç»™å‡ºå¯å¤ç°çš„éªŒè¯å‘½ä»¤ï¼ˆcurl é€šè¿‡ä»£ç†ï¼‰","notes":"Evidence (2026-02-04):\\n- Script: scripts/antigravity-ide-forward-proxy.mjs\\n- Docs: docs/ANTIGRAVITY_IDE_FORWARD_PROXY.md\\n- Smoke: curl via proxy works\\n  - HTTP: curl -x http://127.0.0.1:18080 http://example.com -I\\n  - HTTPS: curl -x http://127.0.0.1:18080 https://example.com -I\\n  - Log sample: /tmp/antigravity-proxy.jsonl contains kind=connect_start/connect_end for example.com:443","status":"closed","priority":1,"issue_type":"task","assignee":"RouteCodex Bot","owner":"bot@routecodex.com","created_at":"2026-02-04T09:37:36.003588+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-04T09:40:41.435913+08:00","closed_at":"2026-02-04T09:40:41.435913+08:00","close_reason":"Implemented local forward proxy (HTTP + CONNECT) + docs; verified via curl with connect_start/connect_end logs.","dependencies":[{"issue_id":"routecodex-1.11","depends_on_id":"routecodex-1","type":"parent-child","created_at":"2026-02-04T10:46:20.753723+08:00","created_by":"import"}]}
{"id":"routecodex-1.2","title":"Antigravityï¼šA6 requestType è§£æï¼ˆagent/web_search/image_genï¼‰","description":"å¯¹é½ Antigravity Tools çš„ request_type åˆ¤å®šï¼ˆ-online åç¼€ / networking tools / image æ¨¡å‹ï¼‰ã€‚éªŒæ”¶ï¼šsamples è¦†ç›–å¹¶èƒ½ç¨³å®šå‘½ä¸­ search/tools/vision è·¯ç”±","status":"open","priority":1,"issue_type":"task","owner":"bot@routecodex.com","created_at":"2026-02-03T12:35:29.879347+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T12:35:29.879347+08:00","dependencies":[{"issue_id":"routecodex-1.2","depends_on_id":"routecodex-1","type":"parent-child","created_at":"2026-02-03T19:28:31.391987+08:00","created_by":"import"}]}
{"id":"routecodex-1.3","title":"Antigravityï¼šA7 googleSearch æ³¨å…¥ \u0026 tools æ¸…ç†","description":"ä»… Antigravity åˆ†æ”¯ï¼šgoogleSearch æ³¨å…¥è¡Œä¸ºä¸ tools æ¸…ç†ä¸€è‡´ã€‚éªŒæ”¶ï¼šdry-run å¯¹æ¯” request.tools ä¸ upstream ä¸€è‡´ï¼Œä¸” followup ä¸ä¸¢å·¥å…·","status":"open","priority":1,"issue_type":"task","owner":"bot@routecodex.com","created_at":"2026-02-03T12:35:29.987425+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T12:35:29.987425+08:00","dependencies":[{"issue_id":"routecodex-1.3","depends_on_id":"routecodex-1","type":"parent-child","created_at":"2026-02-03T19:28:31.392469+08:00","created_by":"import"}]}
{"id":"routecodex-1.4","title":"Antigravityï¼šB2 protected_models æŒä¹…åŒ– + è·¯ç”±å½±å“éªŒè¯","description":"éªŒè¯æ¨¡å‹çº§ä¿æŠ¤/æ¢å¤æœºåˆ¶ä¸è·¯ç”±å‘½ä¸­å½±å“ï¼ˆé€šè¿‡ quotaView å”¯ä¸€äº§å‡ºï¼‰ã€‚éªŒæ”¶ï¼šquota view é‡Œå¯è§ protected çŠ¶æ€ä¸”è·¯ç”±è·³è¿‡","status":"open","priority":1,"issue_type":"task","owner":"bot@routecodex.com","created_at":"2026-02-03T12:35:30.103651+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T12:35:30.103651+08:00","dependencies":[{"issue_id":"routecodex-1.4","depends_on_id":"routecodex-1","type":"parent-child","created_at":"2026-02-03T19:28:31.392927+08:00","created_by":"import"}]}
{"id":"routecodex-1.5","title":"Antigravityï¼šB3 è´¦å·çº§é™æµéªŒè¯","description":"éªŒè¯è´¦å·çº§é™æµä¸ session stickiness ä¸€è‡´ï¼›ç¡®ä¿ä¸ä¼šå¯¼è‡´ alias å…¨å±€ stickyã€‚éªŒæ”¶ï¼š429/é™æµè¡Œä¸ºæŒ‰ç­–ç•¥ç§»å‡º pool","status":"open","priority":1,"issue_type":"task","owner":"bot@routecodex.com","created_at":"2026-02-03T12:35:30.215219+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T12:35:30.215219+08:00","dependencies":[{"issue_id":"routecodex-1.5","depends_on_id":"routecodex-1","type":"parent-child","created_at":"2026-02-03T19:28:31.393385+08:00","created_by":"import"}]}
{"id":"routecodex-1.6","title":"Antigravityï¼šC2 æ¨¡å‹åè§„èŒƒåŒ–ï¼ˆprovider ä¾§é…ç½®ï¼‰","description":"Provider ä¸åšæ¨¡å‹é™çº§/å›é€€ï¼›åªåšåç¼€è§„èŒƒåŒ–ï¼ˆ-low/-high/-medium/-minimalï¼‰ã€‚éªŒæ”¶ï¼šé…ç½®/è·¯ç”±ä¾§æ˜ å°„å¯æ§","status":"open","priority":1,"issue_type":"task","owner":"bot@routecodex.com","created_at":"2026-02-03T12:35:30.341506+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T12:35:30.341506+08:00","dependencies":[{"issue_id":"routecodex-1.6","depends_on_id":"routecodex-1","type":"parent-child","created_at":"2026-02-03T19:28:31.393905+08:00","created_by":"import"}]}
{"id":"routecodex-1.7","title":"Antigravityï¼šD1 UA / X-Goog-Api-Client / Client-Metadata å¯¹é½","description":"Antigravity åˆ†æ”¯ä»…ä½¿ç”¨ UAï¼ˆä¸åŠ  Gemini CLI header tripletï¼‰ï¼Œå¯¹é½æœ€æ–° Antigravity Toolsã€‚éªŒæ”¶ï¼šæŠ“åŒ…/å›æ”¾ header ä¸€è‡´","status":"open","priority":1,"issue_type":"task","owner":"bot@routecodex.com","created_at":"2026-02-03T12:35:30.470878+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T12:35:30.470878+08:00","dependencies":[{"issue_id":"routecodex-1.7","depends_on_id":"routecodex-1","type":"parent-child","created_at":"2026-02-03T19:28:31.394527+08:00","created_by":"import"}]}
{"id":"routecodex-1.8","title":"Antigravityï¼šTransportï¼šAntigravity baseUrl çº§è”éªŒæ”¶ + å›å½’","description":"å·²å®ç° baseUrl candidates + header æ•è·ï¼›è¡¥é½éªŒè¯ä¸å›å½’ï¼ˆç½‘ç»œ/timeout/5xx/403/404 + 429/400ï¼‰ã€‚éªŒæ”¶ï¼šåˆ‡ baseUrl ä¼˜å…ˆäºåˆ‡ alias","status":"open","priority":1,"issue_type":"task","owner":"bot@routecodex.com","created_at":"2026-02-03T12:35:30.595431+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T12:35:30.595431+08:00","dependencies":[{"issue_id":"routecodex-1.8","depends_on_id":"routecodex-1","type":"parent-child","created_at":"2026-02-03T19:28:31.395049+08:00","created_by":"import"}]}
{"id":"routecodex-1.9","title":"Antigravityï¼šå·¥å…· schema æ¸…æ´—ï¼ˆGemini functionDeclarationsï¼‰è¡¥é½","description":"æ›´è´´è¿‘ä¸Šæ¸¸ parameters å­é›†ï¼ˆconstâ†’enumã€ä¸¢å¼ƒä¸æ”¯æŒ keyã€ç»„åˆå™¨æ”¶æ•›ï¼‰ã€‚éªŒæ”¶ï¼šå·¥å…·å£°æ˜ä¸ä¼šè§¦å‘ä¸Šæ¸¸ 400ï¼Œä¸”ä¸ç ´åæœ¬åœ° tool use","status":"open","priority":1,"issue_type":"task","owner":"bot@routecodex.com","created_at":"2026-02-03T12:35:30.721769+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T12:35:30.721769+08:00","dependencies":[{"issue_id":"routecodex-1.9","depends_on_id":"routecodex-1","type":"parent-child","created_at":"2026-02-03T19:28:31.395705+08:00","created_by":"import"}]}
{"id":"routecodex-10","title":"ä¿®å¤ config init åœ¨ Jest ä¸‹è¯¯è¿›å…¥äº¤äº’å¯¼è‡´è¶…æ—¶","description":"## Problem\n`tests/cli/config-command.spec.ts` åœ¨æœ¬åœ° TTY ç¯å¢ƒä¸‹ä¼šè¿›å…¥äº¤äº’å¼ provider é€‰æ‹©å¹¶é˜»å¡ï¼Œå¯¼è‡´è¶…æ—¶ï¼›æœŸæœ›åœ¨æµ‹è¯•ç¯å¢ƒï¼ˆJestï¼‰é»˜è®¤è§†ä¸º non-interactiveï¼Œé™¤éæ˜¾å¼æ³¨å…¥ ctx.promptã€‚\n\n## Acceptance Criteria\n- åœ¨ Jest ç¯å¢ƒï¼ˆJEST_WORKER_ID æˆ– NODE_ENV=testï¼‰ä¸‹ï¼Œconfig init åœ¨æœªæä¾› --providers/--template æ—¶ä¸è¿›å…¥ readline äº¤äº’ï¼Œè€Œæ˜¯èµ° Non-interactive error åˆ†æ”¯\n- `npm run jest:run -- --runTestsByPath tests/cli/config-command.spec.ts` é€šè¿‡","notes":"Fix: disable readline-based interactive prompt in Jest unless ctx.prompt is explicitly provided.\n\nChange:\n- src/cli/commands/config.ts: buildInteractivePrompt returns null when JEST_WORKER_ID or NODE_ENV=test.\n\nEvidence:\n- npm run jest:run -- --runTestsByPath tests/cli/config-command.spec.ts (PASS)","status":"closed","priority":0,"issue_type":"bug","assignee":"RouteCodex Bot","owner":"bot@routecodex.com","created_at":"2026-02-04T12:29:04.673839+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-04T12:30:02.85342+08:00","closed_at":"2026-02-04T12:30:02.85342+08:00","close_reason":"Jest ä¸‹ç¦ç”¨ readline äº¤äº’ï¼Œé¿å… config init é˜»å¡è¶…æ—¶","labels":["bug","cli","test"]}
{"id":"routecodex-11","title":"Qwen userInfo 404 æ—¶é™çº§å¹¶å›å¡« api_key","description":"## Problem\nQwen OAuth å¯åŠ¨æ—¶å°è¯•é€šè¿‡ userInfo æ¥å£è¡¥é½ api_keyï¼Œä½†å½“å‰ userInfo ç«¯ç‚¹è¿”å› 404ï¼Œå¯¼è‡´æ—¥å¿—æŠ¥é”™ä¸”æ— æ³•è¡¥é½ã€‚\n\n## Acceptance Criteria\n- å½“ userInfo 404 æ—¶ï¼Œä¸å†æŠ¥é”™ï¼ˆé™çº§ä¸º debugï¼‰ï¼Œå¹¶å°† api_key å›å¡«ä¸º access_tokenï¼ˆç­‰ä»·äºç°æœ‰ Authorization è¡Œä¸ºï¼Œä¸”å¯é¿å…é‡å¤å°è¯• userInfoï¼‰\n- fetchQwenUserInfo ä¸å†æŠŠ access_token æ”¾åœ¨ URL queryï¼ˆä¼˜å…ˆ Authorization headerï¼‰ï¼Œå¹¶æ”¯æŒå¤šç§ query å‚æ•°åä½œä¸ºå…¼å®¹\n- Jest è¦†ç›–ï¼šuserInfo 404 æ—¶ ensureValidOAuthToken ä»å†™å…¥ api_key","notes":"Fix: when Qwen userInfo endpoint returns 404, treat access_token as api_key and avoid repeated userInfo calls; also fetchQwenUserInfo no longer leaks tokens in URL (prefers Authorization header, then query fallback).\n\nChanges:\n- src/providers/auth/qwen-userinfo-helper.ts: supports env override for userInfo URL; tries bearer first\n- src/providers/auth/oauth-lifecycle.ts: 404 =\u003e merge api_key=access_token; log downgraded to debug\n- tests/providers/auth/oauth-lifecycle.qwen-enrich.spec.ts: adds 404 fallback test\n\nEvidence:\n- npm run jest:run -- --runTestsByPath tests/providers/auth/oauth-lifecycle.qwen-enrich.spec.ts (PASS)","status":"closed","priority":0,"issue_type":"bug","assignee":"RouteCodex Bot","owner":"bot@routecodex.com","created_at":"2026-02-04T12:42:18.643264+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-04T12:44:52.651002+08:00","closed_at":"2026-02-04T12:44:52.651002+08:00","close_reason":"Qwen userInfo 404 é™çº§ï¼šå›å¡« api_key=access_token","labels":["auth","bug","qwen"]}
{"id":"routecodex-12","title":"Fix Qwen OAuth userInfo endpoint + stable api_key","description":"## Context\nQwen OAuth login completes but token appears to not persist / keeps reauthing; logs show userInfo 404 and refresh failures.\n\n## Acceptance Criteria\n- Default Qwen userInfo endpoint no longer 404s in normal flows (switch to chat.qwen.ai and keep portal fallback).\n- If userInfo returns a stable api_key (different from access_token), token file is written with `norefresh: true`.\n- If api_key == access_token (fallback), treat it as non-stable and keep trying to enrich when possible.\n- Unit tests cover enrich + fallback behaviors.","notes":"- Evidence:\n  - `npm run jest:run -- --runTestsByPath tests/providers/auth/oauth-lifecycle.qwen-enrich.spec.ts tests/providers/auth/tokenfile-auth.qwen-alias.spec.ts tests/server/http-server/apikey-secret-resolution.spec.ts tests/server/http-server/httpserver-apikey-env-resolution.spec.ts` (PASS)\n  - `npm run install:global` builds + installs; `routecodex --version` prints 0.89.1669\n- Changes:\n  - Qwen userInfo default switched to `https://chat.qwen.ai/api/v1/user/info` with portal fallback: `src/providers/auth/qwen-userinfo-helper.ts`\n  - Qwen tokens: mark `norefresh: true` when api_key is stable; treat api_key==access_token as non-stable: `src/providers/auth/oauth-lifecycle.ts`, `src/providers/auth/qwen-userinfo-helper.ts`\n  - OAuth config default userInfoUrl aligned: `src/providers/core/config/provider-oauth-configs.ts`\n  - Tests updated/added: `tests/providers/auth/oauth-lifecycle.qwen-enrich.spec.ts`","status":"closed","priority":0,"issue_type":"bug","assignee":"fanzhang","owner":"bot@routecodex.com","created_at":"2026-02-04T13:17:35.362682+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-04T13:18:29.09656+08:00","closed_at":"2026-02-04T13:18:29.09656+08:00","close_reason":"Qwen userInfo default uses chat.qwen.ai; stable api_key marked norefresh; enrich/fallback tests pass."}
{"id":"routecodex-13","title":"Allow startup with missing env apikeys (non-blocking provider init)","description":"## Context\nWhen config uses env refs (e.g. `${CRS_API_KEY}`) but env var is missing, RouteCodex currently aborts server startup. This makes shareable repo configs hard to use unless all keys are present.\n\n## Acceptance Criteria\n- Server can start even if some providers fail to init due to missing env var (emit provider error events + keep running).\n- Routing/request path fails over when a selected provider has no runtime handle.\n- Local providers (e.g. LM Studio localhost) can keep `auth.apiKey: \"\"` without fake keys and without blocking startup.","notes":"- Evidence:\n  - `routecodex start --config ~/.routecodex/config.json` now starts even with missing `${CRS_API_KEY}` etc; emits `[route-error] ... source=provider.provider.runtime.init` and continues.\n  - `lmstudio` runtime initializes with `auth.apiKey: \"\"` (no fake key) when endpoint is `http://127.0.0.1:...`.\n  - Tests: `npm run jest:run -- --runTestsByPath tests/server/http-server/apikey-secret-resolution.spec.ts tests/cli/start-command.spec.ts tests/sharedmodule/virtual-router-routing-model-validation.spec.ts` (PASS).\n- Implementation:\n  - Non-blocking provider init + failover for missing runtimes: `src/server/runtime/http-server/index.ts`.\n  - Local-noauth handling: `src/server/runtime/http-server/index.ts`, `src/providers/core/runtime/provider-factory.ts`, `src/providers/auth/apikey-auth.ts`.\n  - Local baseURL empty apikey allowed in llmswitch-core bootstrap: `sharedmodule/llmswitch-core/src/router/virtual-router/bootstrap.ts`.","status":"closed","priority":0,"issue_type":"bug","assignee":"fanzhang","owner":"bot@routecodex.com","created_at":"2026-02-04T13:52:58.463205+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-04T13:53:33.206022+08:00","closed_at":"2026-02-04T13:53:33.206022+08:00","close_reason":"Provider init no longer aborts startup on missing env apikey; local LM Studio accepts empty key; routing fails over when runtime missing."}
{"id":"routecodex-14","title":"Config: apikey env refs + startup gating","description":"## Goal\n- é»˜è®¤/ç¤ºä¾‹ config ä¸å«æ˜æ–‡ apikeyï¼Œæ”¯æŒ `${ENV}` å¼•ç”¨ï¼›å…¼å®¹ apikey ç›´å†™ï¼›OAuth ä¸æ”¹\n- å¯åŠ¨é˜¶æ®µï¼šåœ¨ runtime åˆå§‹åŒ–å®Œæˆå‰ hold /v1/chat|responses|messages è¯·æ±‚ï¼Œä¸åšæ— æ„ä¹‰å‘½ä¸­\n- provider ç¼ºå¤± apikey/auth ä¸åº”é˜»å¡å¯åŠ¨ï¼ˆæ ‡è®° unhealthy + è·¯ç”±å¯ failoverï¼‰\n\n## Acceptance Criteria\n- `tests/cli/config-command.spec.ts` å…¨éƒ¨é€šè¿‡ï¼ˆå°¤å…¶ non-interactive init ä¸è¿›å…¥äº¤äº’ï¼‰\n- server åœ¨å­˜åœ¨ç¼ºå¤± auth çš„ provider æ—¶ä»èƒ½å¯åŠ¨ï¼Œ/health æ˜¾ç¤º starting-\u003eok\n- runtime æœª ready æ—¶å¯¹ /v1/responses ç­‰è¯·æ±‚ä¼šç­‰å¾…ç›´åˆ° readyï¼ˆæˆ–è¶…æ—¶è¿”å› 503ï¼‰\n- configsamples/config.json ä¸ ~/.routecodex/config.json æ¨¡æ¿ä¸€è‡´ä¸”å¯æ”¾å…¥ repoï¼ˆæ— æ˜æ–‡ keyï¼‰","notes":"Evidence (2026-02-04):\n- Core: `cd sharedmodule/llmswitch-core \u0026\u0026 npm run build` (PASS)\n- Host: `npm run test:cli` (PASS)\n- Host: `npm run build:dev` (PASS; includes unified-hub-shadow, e2e-toolcall, routing-instructions, cli, install:global, mock:regressions, blackbox antigravity parity)\n- Startup gating: /v1/chat|messages|responses handlers wait on runtime-ready (timeout via ROUTECODEX_STARTUP_HOLD_MS)\n- Optional auth: llmswitch-core VirtualRouter no longer blocks bootstrap when apiKey auth missing; provider init errors are surfaced via ProviderErrorEvent without crashing server\n- Config template: apikey uses `${ENV}` (shareable config); LM Studio sample uses empty apiKey for no-auth local baseURL\n","status":"closed","priority":0,"issue_type":"task","assignee":"fanzhang","owner":"bot@routecodex.com","created_at":"2026-02-04T14:11:34.570463+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-04T14:23:21.492246+08:00","closed_at":"2026-02-04T14:23:21.492246+08:00","close_reason":"Implemented env-based apikey + startup hold + non-blocking missing auth; verified via build:dev","labels":["auth","config","server"]}
{"id":"routecodex-15","title":"TokenFileAuthProvider picks up token created after init","description":"## Problem\nWhen OAuth token file is created *after* provider initialization (common when user completes device-code login after server starts), TokenFileAuthProvider may keep failing and server appears to \"not take token\" until restart.","acceptance_criteria":"- TokenFileAuthProvider can start with missing token file (status invalid) but later, after token file appears, buildHeaders succeeds without requiring restart/re-init.\n- Unit test covers late token creation.","notes":"Fix:\n- TokenFileAuthProvider now starts leniently (token file may be missing at init) and re-reads token from disk on each buildHeaders/validateCredentials, so tokens created after OAuth complete are picked up without restart.\n\nFiles:\n- src/providers/auth/tokenfile-auth.ts\n- tests/providers/auth/tokenfile-auth.qwen-alias.spec.ts\n\nEvidence:\n- npm run jest:run -- --runTestsByPath tests/providers/auth/tokenfile-auth.qwen-alias.spec.ts tests/providers/auth/tokenfile-auth.iflow.spec.ts (PASS)\n- npm run build:dev (PASS)\n","status":"closed","priority":0,"issue_type":"bug","assignee":"RouteCodex Bot","owner":"bot@routecodex.com","created_at":"2026-02-04T15:30:56.189143+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-04T15:41:01.545528+08:00","closed_at":"2026-02-04T15:41:01.545528+08:00","close_reason":"TokenFileAuthProvider can pick up late-created token files","labels":["auth","tokenfile"]}
{"id":"routecodex-16","title":"Antigravity 403 verify-account triggers interactive OAuth","description":"## Problem\nAntigravity/Gemini upstream may return HTTP 403 with messages like \"verify your account\" / \"validation_required\" / \"accounts.google.com/signin/continue\". Today this does not trigger interactive OAuth repair, so requests fail without auto portal/browser flow.","acceptance_criteria":"- When upstream error is 403 and message contains verify-account/validation_required/accounts.google.com/signin/continue (or support.google.com/accounts?p=al_alert), provider triggers interactive OAuth repair (openBrowser=true) via oauth-lifecycle.\n- Unit test covers classification.","notes":"Fix:\n- Treat Antigravity/Gemini HTTP 403 verify-account / validation_required / accounts.google.com/signin/continue as an interactive OAuth repair trigger (openBrowser flow).\n\nFiles:\n- src/providers/auth/oauth-lifecycle.ts\n- tests/providers/auth/oauth-lifecycle-antigravity-verify-account.spec.ts\n\nEvidence:\n- npm run jest:run -- --runTestsByPath tests/providers/auth/oauth-lifecycle-antigravity-verify-account.spec.ts (PASS)\n- npm run build:dev (PASS)\n","status":"closed","priority":0,"issue_type":"bug","assignee":"RouteCodex Bot","owner":"bot@routecodex.com","created_at":"2026-02-04T15:30:56.389448+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-04T15:41:01.734337+08:00","closed_at":"2026-02-04T15:41:01.734337+08:00","close_reason":"403 verify-account now triggers interactive OAuth repair","labels":["antigravity","oauth"]}
{"id":"routecodex-17","title":"Qwen oauth command should not force reauth when token valid","description":"## Problem\n`routecodex oauth \u003ctokenFile\u003e` currently always runs interactive OAuth with `forceReauthorize=true`, so even after a successful authorization it keeps asking the user to authenticate again, causing a perceived \"infinite auth loop\".\n\nAdditionally, when user config has no qwen provider, the token file will never be used, which increases confusion.","acceptance_criteria":"- `routecodex oauth \u003cselector\u003e` skips opening browser when the token state is valid and not near expiry, unless `--force` is provided.\n- When token is expiring/expired/invalid, it attempts non-forced refresh first and only falls back to interactive flow when needed.\n- For qwen tokens, prints a clear warning if loaded user config has no qwen provider entry.","notes":"Fix:\n- `routecodex oauth \u003cselector\u003e` no longer forces interactive reauth every time. It skips when token is valid, and only does forced reauth when `--force` is used.\n- Explicit reauth commands (token-daemon refresh, oauth *-auto, reauth-required) keep forcing reauth.\n- For qwen token, warns when user config has no qwen provider entry (token would never be used).\n\nFiles:\n- src/token-daemon/index.ts\n- src/commands/oauth.ts\n- src/commands/token-daemon.ts\n- tests/token-daemon/interactive-refresh.spec.ts\n- scripts/tests/ci-jest.mjs\n- package.json\n\nEvidence:\n- npm run jest:run -- --runTestsByPath tests/token-daemon/interactive-refresh.spec.ts (PASS)\n- npm run build:dev (PASS)\n","status":"closed","priority":0,"issue_type":"bug","assignee":"RouteCodex Bot","owner":"bot@routecodex.com","created_at":"2026-02-04T15:46:31.442492+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-04T15:53:30.31494+08:00","closed_at":"2026-02-04T15:53:30.31494+08:00","close_reason":"OAuth command no longer forces reauth when token valid","labels":["cli","oauth","qwen"]}
{"id":"routecodex-18","title":"Qwen Camoufox auto: click confirm on authorize page","description":"## Goal\nAdd a `qwen-auto` OAuth helper similar to `gemini-auto`/`antigravity-auto`, using Camoufox automation to click Qwen's authorize confirmation button after portal redirect.\n\n## Context\nQwen authorize page shows a Confirm button like: `button.qwen-confirm-btn` (span text: Confirm).\n\n## Acceptance Criteria\n- New CLI command: `routecodex oauth qwen-auto \u003cselector\u003e` runs Camoufox in auto mode `qwen` (headless by default) and performs the confirm click.\n- `scripts/camoufox/launch-auth.mjs` supports `--auto-mode qwen` and clicks `button.qwen-confirm-btn` when present.\n- `npm run build:dev` passes (includes global install).\n","notes":"Implemented Qwen auto confirm click.\n\nChanges:\n- src/commands/oauth.ts: add `qwen-auto` command (Camoufox automation mode=qwen)\n- scripts/camoufox/launch-auth.mjs: support auto-mode qwen, click `button.qwen-confirm-btn`\n\nEvidence:\n- npm run build:dev (PASS, includes install:global)\n\nUsage:\n- routecodex oauth qwen-auto qwen-oauth-1-default.json\n","status":"closed","priority":0,"issue_type":"task","assignee":"RouteCodex Bot","owner":"bot@routecodex.com","created_at":"2026-02-04T15:58:54.140874+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-04T16:03:36.868305+08:00","closed_at":"2026-02-04T16:03:36.868305+08:00","close_reason":"qwen-auto added; camoufox clicks confirm button","labels":["camoufox","oauth","qwen"]}
{"id":"routecodex-19","title":"Qwen qwen-auto: wait for confirm settle + fix manual fallback (no localhost callback)","description":"## Problem\nQwen uses a device-code style authorize page (e.g. https://chat.qwen.ai/authorize?user_code=...), not a localhost OAuth callback.\n\nCurrent `qwen-auto` clicks `button.qwen-confirm-btn` but closes shortly after, and the auto fallback path (headed manual assist) waits for a localhost callback that will never happen for Qwen.\n\n## Acceptance Criteria\n- After clicking `button.qwen-confirm-btn`, qwen-auto waits for a reasonable \"settled\" signal (URL change, button disappearance, or success UI) before closing the browser.\n- If auto selector matching fails and we fall back to headed mode, Qwen fallback does NOT wait for a localhost callback; it should instead keep the browser open for manual completion and exit when the user closes it or after a timeout.\n- Add a small unit test ensuring `qwen-auto` subcommand is registered under `oauth`.\n- `npm run build:dev` passes.\n","notes":"Fix:\n- TokenDaemon background refresh no longer opens interactive OAuth (prevents Qwen auth popups during build/install).\n- qwen-auto automation waits for confirm to settle and has a Qwen-specific headed fallback that does not wait for localhost callback.\n- Added unit tests and included them in routing/CI test lists.\n\nFiles:\n- src/token-daemon/token-daemon.ts\n- scripts/camoufox/launch-auth.mjs\n- tests/token-daemon/token-daemon.auto-refresh-noninteractive.spec.ts\n- tests/commands/oauth-command.qwen-auto.spec.ts\n- package.json\n- scripts/tests/ci-jest.mjs\n\nEvidence:\n- npm run build:dev (PASS, includes install:global)\n","status":"closed","priority":0,"issue_type":"bug","assignee":"RouteCodex Bot","owner":"bot@routecodex.com","created_at":"2026-02-04T16:06:09.420148+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-04T16:18:24.501065+08:00","closed_at":"2026-02-04T16:18:24.318598+08:00","close_reason":"Stop qwen auth popups during build; harden qwen-auto","labels":["camoufox","oauth","qwen"]}
{"id":"routecodex-2","title":"Epic: Init-only Web UIï¼ˆrcc init / rcc startï¼‰","description":"ä» task.md è¿ç§»ï¼šI1-I4 init-only Web UI æ–¹æ¡ˆå®ç°ä¸éªŒæ”¶ã€‚\\n\\néªŒæ”¶ï¼š\\n- rcc init å¯å¯åŠ¨ init-only server+UI\\n- rcc start åœ¨æ—  config æ—¶è¿›å…¥ init UI\\n- OAuth alias é»˜è®¤è§„åˆ™è½åœ°\\n- ç”Ÿæˆçš„ routing è‡³å°‘åŒ…å« default target","status":"open","priority":0,"issue_type":"epic","owner":"bot@routecodex.com","created_at":"2026-02-03T12:34:15.241737+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T12:34:15.241737+08:00"}
{"id":"routecodex-2.1","title":"Init UIï¼šI1 init-only server + UI","description":"å®ç° init-only server + UIï¼ˆæœ¬åœ°è®¿é—®ã€æ”¯æŒ OAuth/ApiKeyã€é»˜è®¤ route æ± ã€å¯å›é€€åˆ° adminï¼‰ã€‚å‚è€ƒï¼šsrc/server/runtime/init-server.ts, docs/init-ui.html","status":"open","priority":1,"issue_type":"task","owner":"bot@routecodex.com","created_at":"2026-02-03T12:35:47.755495+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T12:35:47.755495+08:00","dependencies":[{"issue_id":"routecodex-2.1","depends_on_id":"routecodex-2","type":"parent-child","created_at":"2026-02-03T19:28:31.396242+08:00","created_by":"import"}]}
{"id":"routecodex-2.2","title":"Init UIï¼šI2 CLI å…¥å£è¡Œä¸ºå¯¹é½","description":"rcc init å¯åŠ¨ init-onlyï¼›rcc start æ—  config è‡ªåŠ¨è¿›å…¥ init UIã€‚å‚è€ƒï¼šsrc/cli/commands/init.ts, src/cli/commands/start.ts, src/index.ts","status":"open","priority":1,"issue_type":"task","owner":"bot@routecodex.com","created_at":"2026-02-03T12:35:47.879322+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T12:35:47.879322+08:00","dependencies":[{"issue_id":"routecodex-2.2","depends_on_id":"routecodex-2","type":"parent-child","created_at":"2026-02-03T19:28:31.396704+08:00","created_by":"import"}]}
{"id":"routecodex-2.3","title":"Init UIï¼šI3 OAuth alias é»˜è®¤è§„åˆ™","description":"alias é»˜è®¤å– email @ å‰ç¼€å¹¶å»æ‰ . ä¸æ ‡ç‚¹ï¼Œä»…å­—æ¯/æ•°å­—ã€‚å‚è€ƒï¼šsrc/server/runtime/init-server.ts","status":"open","priority":1,"issue_type":"task","owner":"bot@routecodex.com","created_at":"2026-02-03T12:35:48.005137+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T12:35:48.005137+08:00","dependencies":[{"issue_id":"routecodex-2.3","depends_on_id":"routecodex-2","type":"parent-child","created_at":"2026-02-03T19:28:31.39714+08:00","created_by":"import"}]}
{"id":"routecodex-2.4","title":"Init UIï¼šI4 è·¯ç”±æ± é…ç½® + é»˜è®¤è·¯ç”±","description":"é»˜è®¤ default è·¯ç”±å¿…é¡»è‡³å°‘ä¸€ä¸ª targetï¼›UI å¿…é¡»å¼ºæ ¡éªŒã€‚å‚è€ƒï¼šdocs/init-ui.html, src/server/runtime/init-server.ts","status":"open","priority":1,"issue_type":"task","owner":"bot@routecodex.com","created_at":"2026-02-03T12:35:48.124449+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T12:35:48.124449+08:00","dependencies":[{"issue_id":"routecodex-2.4","depends_on_id":"routecodex-2","type":"parent-child","created_at":"2026-02-03T19:28:31.397568+08:00","created_by":"import"}]}
{"id":"routecodex-20","title":"Docs: unify OAuth README (auth + refresh + auto modes)","description":"## Goal\nProvide a single, up-to-date OAuth README that explains:\n- How to authenticate (manual + Camoufox automation)\n- How refresh works (background silent vs explicit interactive)\n- Token file naming and `tokenFile` alias usage\n- Common troubleshooting (\"authorized but server doesn't use token\")\n\n## Acceptance Criteria\n- Add `docs/OAUTH.md` as the canonical OAuth guide.\n- Update `README.md` docs list to include it.\n- Update existing older OAuth docs (`docs/oauth-authentication-guide.md`, `src/providers/auth/README_OAUTH.md`) to point to `docs/OAUTH.md` (keep old content but clearly mark as legacy).\n- Update `docs/PROVIDERS_BUILTIN.md` Qwen snippet to use `tokenFile: \"default\"`.\n- `npm run verify:repo-sanity` passes.\n","notes":"Evidence\\n- Added canonical OAuth doc: docs/OAUTH.md\\n- Linked from README.md and aligned Qwen config in docs/PROVIDERS_BUILTIN.md\\n- Marked legacy docs to defer to docs/OAUTH.md: docs/oauth-authentication-guide.md, docs/oauth-iflow-implementation.md, src/providers/auth/README_OAUTH.md\\n- Updated daemon docs to avoid legacy qwen-oauth.json naming: docs/token-refresh-daemon-plan.md, docs/token-daemon-preview.html\\n\\nVerification\\n- npm run verify:repo-sanity  â†’ [repo-sanity] ok\\n- npm run build:dev           â†’ OK (full dev verification stack)\\n- npm run install:global      â†’ OK (routecodex --version = 0.89.1682)\\n","status":"closed","priority":1,"issue_type":"task","assignee":"RouteCodex Bot","owner":"bot@routecodex.com","created_at":"2026-02-04T16:26:23.902201+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-04T16:36:18.672769+08:00","closed_at":"2026-02-04T16:36:18.672769+08:00","close_reason":"Unified OAuth docs + aligned Qwen tokenFile alias; verified with repo-sanity/build:dev/global install","labels":["docs","oauth"]}
{"id":"routecodex-21","title":"fix(qwen): invalid refresh token should not spam/block","description":"## Steps to Reproduce\n1. Have a Qwen OAuth token file where refresh_token is invalid (revoked/expired) or client_id mismatch.\n2. Start server (TokenDaemon enabled) or wait for TokenDaemon tick.\n3. Observe repeated logs like: OAuth error: invalid_request - Invalid refresh token or client_id.\n\n## Expected\n- Auto-refresh should fail fast on permanent refresh errors and stop retrying/spamming until token file changes.\n- Non-Qwen traffic should not be impacted by Qwen refresh failures.\n\n## Actual\n- Refresh retries multiple times and keeps trying periodically, producing noisy logs and perceived blocking.\n\n## Acceptance Criteria\n- Abort OAuth refresh retry loop early on permanent refresh errors (invalid_request/invalid_grant/invalid_client related to refresh token/client_id).\n- TokenDaemon auto-suspends token immediately on permanent refresh failure until token file mtime changes.\n- Add/adjust unit tests covering this behavior.\n- Run verification: npm run verify:repo-sanity + targeted jest.\n","notes":"Evidence\\n- Early abort for permanent refresh errors: src/providers/core/strategies/oauth-device-flow.ts, src/providers/core/strategies/oauth-auth-code-flow.ts, src/providers/core/strategies/oauth-refresh-errors.ts\\n- TokenDaemon now classifies permanent refresh failure and immediately auto-suspends the token until token file mtime changes: src/token-daemon/token-daemon.ts, src/token-daemon/history-store.ts\\n\\nTests\\n- npm run verify:repo-sanity  â†’ [repo-sanity] ok\\n- npm run jest:run -- --runTestsByPath tests/token-daemon/history-store.auto-suspend-immediate.spec.ts tests/providers/core/oauth-refresh-permanent-errors.spec.ts  â†’ PASS\\n","status":"closed","priority":1,"issue_type":"bug","assignee":"RouteCodex Bot","owner":"bot@routecodex.com","created_at":"2026-02-04T16:47:05.704363+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-04T16:53:32.892995+08:00","closed_at":"2026-02-04T16:53:32.892995+08:00","close_reason":"Stop repeated Qwen refresh retries on permanent errors; auto-suspend until token changes; verified by tests","labels":["oauth","qwen","token-daemon"]}
{"id":"routecodex-22","title":"feat(qwen): pin tokenFile=default to qwen-oauth-1-default.json","description":"## Goal\nMake Qwen token references easier/safer by keeping a single stable default token file.\n\n## Acceptance Criteria\n- For Qwen only, `auth.tokenFile: \"default\"` resolves to `~/.routecodex/auth/qwen-oauth-1-default.json` when it exists; otherwise fall back to the latest `qwen-oauth-*-default.json`.\n- Update docs (`docs/OAUTH.md`) to reflect the pinned default behavior.\n- Add unit test covering the pinned behavior when both seq1 and seq2 exist.\n- Run verification (repo-sanity + relevant jest; ideally build:dev + global install).\n","notes":"Evidence\\n- Qwen tokenFile=\"default\" now prefers pinned seq=1 if present: src/providers/auth/tokenfile-auth.ts\\n- Qwen synthetic default token file path aligned to qwen-oauth-1-default.json: src/token-daemon/token-daemon.ts\\n- Docs updated: docs/OAUTH.md\\n\\nTests\\n- npm run verify:repo-sanity â†’ ok\\n- npm run jest:run -- --runTestsByPath tests/providers/auth/tokenfile-auth.qwen-alias.spec.ts â†’ PASS\\n\\nVerification\\n- npm run build:dev â†’ OK\\n- npm run install:global â†’ OK (routecodex --version = 0.89.1684)\\n","status":"closed","priority":2,"issue_type":"task","assignee":"RouteCodex Bot","owner":"bot@routecodex.com","created_at":"2026-02-04T17:05:24.923216+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-04T17:09:05.482887+08:00","closed_at":"2026-02-04T17:09:05.482887+08:00","close_reason":"Pin Qwen tokenFile=default to stable qwen-oauth-1-default.json; verified","labels":["docs","oauth","qwen"]}
{"id":"routecodex-3","title":"Epic: llms-wasm åŒåŠ è½½ä¸å¼€å…³çŸ©é˜µï¼ˆW2ï¼‰","description":"ä» task.md è¿ç§»ï¼šW2 é˜¶æ®µ 1ï¼ˆHost ä¾§ WASM+TS åŒåŠ è½½ã€shadow/primary åˆ‡æ¢ã€ä¼˜å…ˆçº§çŸ©é˜µã€å½±å­åˆ†å‘ã€å¤±è´¥ä¸ŠæŠ¥ã€éš”ç¦»éªŒè¯ï¼‰ã€‚\\n\\néªŒæ”¶ï¼š\\n- Host å¯æŒ‰ ROUTECODEX_HUB_PIPELINE_IMPL åˆ‡æ¢ implï¼ˆts/wasm/shadow/splitï¼‰\\n- shadow éé˜»å¡ä¸”å¯è§‚æµ‹\\n- wasm åˆå§‹åŒ–å¤±è´¥é€šè¿‡ error center ä¸ŠæŠ¥","status":"open","priority":0,"issue_type":"epic","owner":"bot@routecodex.com","created_at":"2026-02-03T12:34:23.578772+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T12:34:23.578772+08:00"}
{"id":"routecodex-3.1","title":"W2ï¼šå®ç° src/runtime/wasm-runtime ç»“æ„ä¸å…¥å£","description":"æ–°å¢ src/runtime/wasm-runtime/ å¹¶æ¥å…¥ç°æœ‰ runtime åˆå§‹åŒ–æµç¨‹ï¼ˆä¸å½±å“ ts ä¸»è·¯å¾„ï¼‰ã€‚","status":"open","priority":0,"issue_type":"task","owner":"bot@routecodex.com","created_at":"2026-02-03T12:36:01.235092+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T12:36:01.235092+08:00","dependencies":[{"issue_id":"routecodex-3.1","depends_on_id":"routecodex-3","type":"parent-child","created_at":"2026-02-03T19:28:31.398003+08:00","created_by":"import"}]}
{"id":"routecodex-3.2","title":"W2ï¼šå®ç° WasmRuntime ç±»","description":"è´Ÿè´£ wasm åŠ è½½/åˆå§‹åŒ–/ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼ˆload onceã€disposeã€é”™è¯¯ä¸ŠæŠ¥ï¼‰ã€‚","status":"open","priority":0,"issue_type":"task","owner":"bot@routecodex.com","created_at":"2026-02-03T12:36:01.361701+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T12:36:01.361701+08:00","dependencies":[{"issue_id":"routecodex-3.2","depends_on_id":"routecodex-3","type":"parent-child","created_at":"2026-02-03T19:28:31.398419+08:00","created_by":"import"}]}
{"id":"routecodex-3.3","title":"W2ï¼šbridge: getHubPipelineCtorForImpl('wasm')","description":"æ‰©å±• src/modules/llmswitch/bridge æ”¯æŒ wasm HubPipeline ctor é€‰æ‹©ã€‚","status":"open","priority":0,"issue_type":"task","owner":"bot@routecodex.com","created_at":"2026-02-03T12:36:01.486951+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T12:36:01.486951+08:00","dependencies":[{"issue_id":"routecodex-3.3","depends_on_id":"routecodex-3","type":"parent-child","created_at":"2026-02-03T19:28:31.398991+08:00","created_by":"import"}]}
{"id":"routecodex-3.4","title":"W2ï¼šensureHubPipelineEngineShadow åŠ è½½ wasm HubPipeline","description":"å®ç° host ä¾§ engine shadow loaderï¼ˆæŒ‰ llms-wasm/js/hub-pipeline.mjsï¼‰ã€‚","status":"open","priority":0,"issue_type":"task","owner":"bot@routecodex.com","created_at":"2026-02-03T12:36:01.610184+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T12:36:01.610184+08:00","dependencies":[{"issue_id":"routecodex-3.4","depends_on_id":"routecodex-3","type":"parent-child","created_at":"2026-02-03T19:28:31.399695+08:00","created_by":"import"}]}
{"id":"routecodex-3.5","title":"W2ï¼šè§£æè¿è¡Œæ¨¡å¼å¼€å…³ ROUTECODEX_HUB_PIPELINE_IMPL","description":"æ”¯æŒ shadow/wasm_primary/ts_primary/splitï¼Œå¹¶è½åœ°ä¼˜å…ˆçº§è§£æå…¥å£ã€‚","status":"open","priority":0,"issue_type":"task","owner":"bot@routecodex.com","created_at":"2026-02-03T12:36:01.727086+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T12:36:01.727086+08:00","dependencies":[{"issue_id":"routecodex-3.5","depends_on_id":"routecodex-3","type":"parent-child","created_at":"2026-02-03T19:28:31.400215+08:00","created_by":"import"}]}
{"id":"routecodex-3.6","title":"W2ï¼šå®ç°å¼€å…³ä¼˜å…ˆçº§çŸ©é˜µ","description":"å…¨å±€ \u003e ç§Ÿæˆ· \u003e è·¯ç”± \u003e è¯·æ±‚ çš„å†³ç­–çŸ©é˜µï¼Œç¡®ä¿å¯æµ‹è¯•/å¯è§‚æµ‹ã€‚","status":"open","priority":0,"issue_type":"task","owner":"bot@routecodex.com","created_at":"2026-02-03T12:36:01.848934+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T12:36:01.848934+08:00","dependencies":[{"issue_id":"routecodex-3.6","depends_on_id":"routecodex-3","type":"parent-child","created_at":"2026-02-03T19:28:31.400692+08:00","created_by":"import"}]}
{"id":"routecodex-3.7","title":"W2ï¼šå®ç°å½±å­è¯·æ±‚åˆ†å‘é€»è¾‘","description":"ä¸»è·¯æ­£å¸¸è¿”å›ï¼›å½±å­å¼‚æ­¥æ‰§è¡Œ + è®°å½• diff/æŒ‡æ ‡ï¼›å¿…é¡»éé˜»å¡ã€‚","status":"open","priority":0,"issue_type":"task","owner":"bot@routecodex.com","created_at":"2026-02-03T12:36:01.963652+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T12:36:01.963652+08:00","dependencies":[{"issue_id":"routecodex-3.7","depends_on_id":"routecodex-3","type":"parent-child","created_at":"2026-02-03T19:28:31.401158+08:00","created_by":"import"}]}
{"id":"routecodex-3.8","title":"W2ï¼šWASM åˆå§‹åŒ–å¤±è´¥ä¸ŠæŠ¥","description":"é€šè¿‡ providerErrorCenter + errorHandlingCenter ä¸ŠæŠ¥ï¼Œfail-fast ä¸é™é»˜ã€‚","status":"open","priority":0,"issue_type":"task","owner":"bot@routecodex.com","created_at":"2026-02-03T12:36:02.07796+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T12:36:02.07796+08:00","dependencies":[{"issue_id":"routecodex-3.8","depends_on_id":"routecodex-3","type":"parent-child","created_at":"2026-02-03T19:28:31.401614+08:00","created_by":"import"}]}
{"id":"routecodex-3.9","title":"W2ï¼šéš”ç¦»éªŒè¯ï¼šåŒåŠ è½½äº’ä¸å½±å“","description":"å¢åŠ éš”ç¦»æµ‹è¯•ï¼Œç¡®ä¿ wasm/ts ä¸å…±äº«å¯å˜çŠ¶æ€å¯¼è‡´ä¸²æ‰°ã€‚","status":"open","priority":0,"issue_type":"task","owner":"bot@routecodex.com","created_at":"2026-02-03T12:36:02.191061+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T12:36:02.191061+08:00","dependencies":[{"issue_id":"routecodex-3.9","depends_on_id":"routecodex-3","type":"parent-child","created_at":"2026-02-03T19:28:31.402069+08:00","created_by":"import"}]}
{"id":"routecodex-4","title":"Epic: CI åŸºçº¿ + è¦†ç›–ç‡é—¨ç¦ï¼ˆroutecodex + llmswitch-coreï¼‰","description":"ä» task.md è¿ç§»ï¼šCI åŸºçº¿ï¼ˆPR å¿…è·‘ï¼‰ä¸è¦†ç›–ç‡é—¨ç¦æå‡ï¼ˆç›®æ ‡ 90%ï¼‰çš„å‰©ä½™å·¥ä½œé¡¹ã€‚\\n\\néªŒæ”¶ï¼š\\n- llmswitch-core-ci ä½œä¸º Required status checksï¼ˆGitHub è®¾ç½®ï¼‰\\n- ä¾èµ– llms æ›´æ–°å re-enable release CI servertool suites\\n- è¦†ç›–ç‡é—¨ç¦é€æ­¥æå‡åˆ° 90% å¹¶æœ‰å¯å®¡è®¡ allowlist","status":"open","priority":1,"issue_type":"epic","owner":"bot@routecodex.com","created_at":"2026-02-03T12:34:31.909971+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T12:34:31.909971+08:00"}
{"id":"routecodex-4.1","title":"CIï¼šGitHub è®¾ç½®ï¼šllmswitch-core-ci è®¾ä¸º Required status checks","description":"task.md 14. ä»éœ€æ‹æ¿é¡¹ï¼šåœ¨ GitHub branch protection ä¸­æŠŠ llmswitch-core-ci æ ‡ä¸º requiredï¼ˆPR å¿…è¿‡ï¼‰ã€‚","status":"open","priority":1,"issue_type":"task","owner":"bot@routecodex.com","created_at":"2026-02-03T12:36:14.274947+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T12:36:14.274947+08:00","dependencies":[{"issue_id":"routecodex-4.1","depends_on_id":"routecodex-4","type":"parent-child","created_at":"2026-02-03T19:28:31.402523+08:00","created_by":"import"}]}
{"id":"routecodex-4.2","title":"CIï¼šCI æµ‹è¯•é›† re-enableï¼ˆå¾… @jsonstudio/llms å‘å¸ƒï¼‰","description":"release CI ç›®å‰åŸºäº npm @jsonstudio/llms@0.6.1172ï¼›å¾… llms å‘å¸ƒæ–°ç‰ˆæœ¬åï¼ŒæŠŠä¾èµ–æ–°è¡Œä¸ºçš„ servertool/sharedmodule æµ‹è¯•é‡æ–°çº³å…¥ã€‚","status":"open","priority":1,"issue_type":"task","owner":"bot@routecodex.com","created_at":"2026-02-03T12:36:14.400941+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T12:36:14.400941+08:00","dependencies":[{"issue_id":"routecodex-4.2","depends_on_id":"routecodex-4","type":"parent-child","created_at":"2026-02-03T19:28:31.402969+08:00","created_by":"import"}]}
{"id":"routecodex-4.3","title":"CIï¼šä¿®å¤é˜»å¡å…¨é‡ coverage çš„å•æµ‹æˆ–æ‹† nightly","description":"å¤„ç† tests/servertool/virtual-router-quota-routing.spec.ts çš„ä¸ç¨³å®š/é˜»å¡ç‚¹ï¼Œæˆ–æ‹†åˆ†è¿› nightly jobã€‚","status":"open","priority":1,"issue_type":"task","owner":"bot@routecodex.com","created_at":"2026-02-03T12:36:14.516597+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T12:36:14.516597+08:00","dependencies":[{"issue_id":"routecodex-4.3","depends_on_id":"routecodex-4","type":"parent-child","created_at":"2026-02-03T19:28:31.403432+08:00","created_by":"import"}]}
{"id":"routecodex-4.4","title":"CIï¼šè¦†ç›–ç‡é—¨ç¦æå‡åˆ° 90%ï¼ˆæ¸è¿›ï¼‰","description":"æŠŠå½“å‰ä¸´æ—¶é˜ˆå€¼é€æ­¥æé«˜åˆ° 90%ï¼ˆlines/branches/functions/statementsï¼‰ï¼Œå¹¶ç»´æŠ¤å¯å®¡è®¡ allowlistã€‚","status":"open","priority":1,"issue_type":"task","owner":"bot@routecodex.com","created_at":"2026-02-03T12:36:14.631723+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T12:36:14.631723+08:00","dependencies":[{"issue_id":"routecodex-4.4","depends_on_id":"routecodex-4","type":"parent-child","created_at":"2026-02-03T19:28:31.403887+08:00","created_by":"import"}]}
{"id":"routecodex-4.5","title":"CIï¼šè½åœ°æµ‹è¯•åˆ†å±‚ä¸ coverage map gate","description":"å¯ç”¨ tests/unit|integration|regression|golden åˆ†å±‚ï¼Œå¹¶ä¸Šçº¿ scripts/verify-test-coverage-map.mjs ä½œä¸º gateã€‚","status":"open","priority":1,"issue_type":"task","owner":"bot@routecodex.com","created_at":"2026-02-03T12:36:14.746481+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T12:36:14.746481+08:00","dependencies":[{"issue_id":"routecodex-4.5","depends_on_id":"routecodex-4","type":"parent-child","created_at":"2026-02-03T19:28:31.404354+08:00","created_by":"import"}]}
{"id":"routecodex-4.6","title":"CIï¼šGolden æ‰©å®¹ç­–ç•¥è½åœ°","description":"fixtures ä½“ç§¯è†¨èƒ€æ—¶è¿ GitHub Release asset + sha256 lockï¼Œä¿è¯ CI å¯è·å–ä¸”å¯å¤ç°ã€‚","status":"open","priority":1,"issue_type":"task","owner":"bot@routecodex.com","created_at":"2026-02-03T12:36:14.859804+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T12:36:14.859804+08:00","dependencies":[{"issue_id":"routecodex-4.6","depends_on_id":"routecodex-4","type":"parent-child","created_at":"2026-02-03T19:28:31.40482+08:00","created_by":"import"}]}
{"id":"routecodex-5","title":"Fix Qwen OAuth token not used (api_key enrichment)","description":"## Steps to Reproduce\n1. Run `routecodex oauth ~/.routecodex/auth/qwen-oauth-1-default.json` and complete OAuth.\n2. Token file contains `access_token`/`refresh_token` but no `api_key`.\n3. Start RouteCodex and route a request to Qwen (e.g. background route `qwen.qwen3-coder-plus`).\n4. Observe server still fails auth / appears not to use token.\n\n## Acceptance Criteria\n- When Qwen token file is missing `api_key`, RouteCodex backfills it via Qwen user-info endpoint and persists it (without requiring token refresh).\n- CLI init provider catalog uses `~/.routecodex/auth/qwen-oauth-1-default.json` by default.\n- `npm run build:dev` passes (includes `install:global`).","notes":"- Code: src/providers/auth/oauth-lifecycle.ts (Qwen api_key enrichment)\n- Config: src/cli/config/init-provider-catalog.ts (tokenFile now qwen-oauth-1-default.json)\n- Test: tests/providers/auth/oauth-lifecycle.qwen-enrich.spec.ts (PASS)\n- Commit: 9e9ce8769\n- Verification: npm run build:dev (includes install:global) completed successfully on 2026-02-03.","status":"closed","priority":1,"issue_type":"bug","owner":"bot@routecodex.com","created_at":"2026-02-03T23:48:52.631504+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T23:49:29.917668+08:00","closed_at":"2026-02-03T23:49:29.917668+08:00","close_reason":"Implemented Qwen api_key enrichment + default tokenFile alignment","labels":["auth","qwen"]}
{"id":"routecodex-6","title":"rcc: ä¸‰è¿è¡Œæ¨¡å¼ç°çŠ¶å¯¹é½ï¼ˆrouter/analysis/directï¼‰","description":"## Background\nç›®å‰å¸Œæœ› rcc æœ‰ 3 ä¸ªè¿è¡Œæ¨¡å¼ï¼š\n1) **è·¯ç”±å™¨æ¨¡å¼ï¼ˆrouterï¼‰**ï¼šå½“å‰é»˜è®¤æ¨¡å¼ã€‚\n2) **åˆ†ææ¨¡å¼ï¼ˆanalysis/bypassï¼‰**ï¼šå¯¹å¤– API è¾“å…¥/è¾“å‡ºå½¢çŠ¶ä¿æŒä¸€è‡´ï¼›å†…éƒ¨å°½é‡â€œé€ä¼ â€ï¼Œå¹¶æŠŠå…¥ç«™/å‡ºç«™ï¼ˆå« upstreamï¼‰è®°å½•ä¸‹æ¥ç”¨äºåˆ†æã€‚\n3) **æœåŠ¡å™¨æ¨¡å¼ï¼ˆdirectï¼‰**ï¼šå½“è¯·æ±‚ `model` å½¢å¦‚ `provider.model` æ—¶ï¼Œä¸èµ°è·¯ç”±åˆ†ç±»ï¼Œç›´æ¥å‘½ä¸­è¯¥ provider çš„å¯¹åº” modelã€‚\n\n## Current State (code evidence)\n### (1) router\n- é»˜è®¤ `processMode='chat'`ï¼ŒHub Pipeline ä¼šè¿›å…¥ chat_processï¼ˆå« tool governance + è·¯ç”±ï¼‰ã€‚\n\n### (2) analysis/bypass\n- core/host å·²å­˜åœ¨ `processMode='passthrough'` çš„åŸºç¡€èƒ½åŠ›ï¼š\n  - å…è®¸ provider é€šè¿‡é…ç½® `process: 'passthrough'` è¿›å…¥ passthroughï¼›ä»¥åŠ server åœ¨ `processMode==='passthrough'` æ—¶è·³è¿‡ response äºŒæ¬¡è½¬æ¢ã€‚\n  - æ–‡æ¡£å£°æ˜ passthrough ä¼šâ€œè¯·æ±‚ä¸å“åº”åŸæ ·é€ä¼ â€ï¼Œä¸”ä»ä¼šå†™å…¥ request/response snapshotsã€‚\n- ä½†ç›®å‰æ²¡æœ‰çœ‹åˆ°ä¸€ä¸ª**æ˜ç¡®çš„ rcc â€œanalysis modeâ€å…¨å±€å¼€å…³/CLI é…ç½®**æ¥ä¿è¯â€œé€ä¼  + è®°å½•å…¥/å‡ºç«™â€æŒ‰ç»Ÿä¸€å¥‘çº¦è½åœ°ï¼ˆä¾‹å¦‚å›ºå®šè½ç›˜æ ¼å¼ã€è¾“å‡ºä½ç½®ã€å¼€å¯æ¡ä»¶ï¼‰ã€‚\n\n### (3) direct (model=provider.model)\n- llmswitch-core VirtualRouterEngine å·²å®ç°å¯¹ `request.model` çš„ direct åˆ†æ”¯ï¼š\n  - è§£æ `providerId.modelId` åèµ° `selectDirectProviderModel(...)` å¹¶è®¾ç½® `routeName='direct'`ã€‚\n\n## Acceptance Criteria\n- [ ] æ˜ç¡® rcc ä¸‰æ¨¡å¼çš„â€œå…¥å£å¼€å…³â€ï¼ˆCLI flag / config / request metadataï¼‰ä¸ä¼˜å…ˆçº§ï¼Œå¹¶åœ¨ docs ä¸­å†™æ¸…ã€‚\n- [ ] analysis/bypassï¼šå®šä¹‰ç¨³å®šçš„è®°å½•å†…å®¹ä¸è½ç›˜ä½ç½®ï¼ˆè‡³å°‘ï¼šinbound åŸå§‹ payloadã€provider outbound payloadã€provider inbound responseã€outbound ç»™å®¢æˆ·ç«¯çš„ payloadï¼›åŒæ—¶è¦†ç›– stream ä¸é streamï¼‰ã€‚\n- [ ] analysis/bypassï¼šä¿è¯å¯¹å¤–è¯·æ±‚/å“åº”åè®®å½¢çŠ¶ä¸å˜ï¼›ä¸ä¼šå¼•å…¥ host/provider å±‚è¯­ä¹‰ä¿®å¤ï¼ˆä»éµå¾ªå•æ‰§è¡Œè·¯å¾„ï¼‰ã€‚\n- [ ] directï¼šæ·»åŠ å›å½’éªŒè¯ï¼ˆæµ‹è¯•æˆ–è„šæœ¬ï¼‰è¯æ˜ `model=provider.model` æ—¶ routeName=direct ä¸”åªåœ¨è¯¥ provider/model æ± å†…é€‰æ‹©ã€‚\n\n## References\n- `sharedmodule/llmswitch-core/src/router/virtual-router/engine.ts`ï¼ˆdirect model åˆ†æ”¯ï¼‰\n- `sharedmodule/llmswitch-core/src/router/virtual-router/bootstrap.ts`ï¼ˆprovider.process -\u003e processModeï¼‰\n- `sharedmodule/llmswitch-core/src/conversion/hub/pipeline/hub-pipeline.ts`ï¼ˆprocessMode gateï¼‰\n- `src/server/runtime/http-server/executor-response.ts`ï¼ˆpassthrough è·³è¿‡ response convertï¼‰\n- `docs/CONFIG_ARCHITECTURE.md`ï¼ˆpassthrough è¯­ä¹‰ä¸ snapshots æè¿°ï¼‰\n","notes":"Verified 2026-02-04 (local):\\n- direct model parse+branch: sharedmodule/llmswitch-core/src/router/virtual-router/engine.ts:163 and :432\\n- direct selection respects allow/disable/health via trySelectFromTier: sharedmodule/llmswitch-core/src/router/virtual-router/engine-selection/direct-provider-model.ts:6\\n- provider.process -\u003e target.processMode: sharedmodule/llmswitch-core/src/router/virtual-router/bootstrap.ts:684\\n- route-select overwrites metadata.processMode from target: sharedmodule/llmswitch-core/src/conversion/hub/pipeline/target-utils.ts:5\\n- passthrough skips request-side tool governance stage: sharedmodule/llmswitch-core/src/conversion/hub/pipeline/hub-pipeline.ts:479\\n- passthrough skips response conversion in host: src/server/runtime/http-server/executor-response.ts:51\\n- release é»˜è®¤ snapshots off; start --snap forces ROUTECODEX_SNAPSHOT=1: src/cli/commands/start.ts:91\\n- client-request snapshot: src/server/runtime/http-server/index.ts:1317 (or request-executor.ts:173)\nImplemented A (router + forced snapshots):\\n- Added CLI mode flag: src/cli/commands/start.ts (\"--mode router|analysis|server\").\\n- analysis mode sets env: ROUTECODEX_SNAPSHOT=1, ROUTECODEX_HUB_SNAPSHOTS=1, ROUTECODEX_CAPTURE_STREAM_SNAPSHOTS=1.\\n- Added client-response snapshot capture gated by ROUTECODEX_MODE=analysis: src/server/handlers/handler-utils.ts.\\nVerification (no version bump):\\n- ROUTECODEX_SKIP_AUTO_BUMP=1 npm run build:dev (passed, includes install:global + e2e/toolcall + blackbox antigravity parity).\nPost-fix verification: npm run test:cli (passed).","status":"in_progress","priority":1,"issue_type":"task","assignee":"RouteCodex Bot","owner":"bot@routecodex.com","created_at":"2026-02-04T00:07:53.325437+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-04T01:00:57.034018+08:00","labels":["mode","rcc"]}
{"id":"routecodex-7","title":"é»˜è®¤é…ç½®æ”¯æŒç¯å¢ƒå˜é‡ API Keyï¼ˆå»æ˜æ–‡ï¼‰","description":"## Background\nå½“å‰é»˜è®¤/ç¤ºä¾‹é…ç½®é¼“åŠ±åœ¨ config ä¸­å†™å…¥æ˜æ–‡ apiKeyï¼›å¸Œæœ›æ”¹ä¸ºä½¿ç”¨ç¯å¢ƒå˜é‡å¼•ç”¨ï¼ˆä¾‹å¦‚ `${OPENAI_API_KEY}`ï¼‰ï¼Œä»¥ä¾¿é…ç½®å¯åˆ†äº«/å¯è¿› repoã€‚\n\n## Acceptance Criteria\n- é»˜è®¤/ç¤ºä¾‹/`routecodex init` ç”Ÿæˆé…ç½®ä¸­ï¼Œapikey ä½¿ç”¨ç¯å¢ƒå˜é‡å¼•ç”¨ï¼ˆ`${VAR}`ï¼‰è€Œéæ˜æ–‡/å ä½ç¬¦ã€‚\n- è¿è¡Œæ—¶ä»…å¯¹ apikey åšå¼•ç”¨è§£æï¼š`${VAR}`/`VAR`/`authfile-*` å¯è§£æä¸ºçœŸå® secretï¼›apikey ç›´å†™ç»§ç»­å…¼å®¹ã€‚\n- OAuth è¡Œä¸ºä¸å˜ï¼ˆä¸æ–°å¢/ä¸æ”¹ env è§£æï¼‰ã€‚\n- env ç¼ºå¤±æ—¶ fail fastï¼ŒæŠ¥é”™åŒ…å«ç¼ºå¤±å˜é‡åã€‚\n- Jest è¦†ç›– `${VAR}` è§£æã€ç›´å†™å…¼å®¹ã€ç¼ºå¤± env æŠ›é”™ã€‚\n","notes":"Implemented apikey env resolution for provider runtime and httpserver middleware; updated init + configsamples to use ${ENV}.\n\nEvidence:\n- Jest: npm run jest:run -- --runTestsByPath tests/server/http-server/apikey-secret-resolution.spec.ts tests/server/http-server/httpserver-apikey-env-resolution.spec.ts\n- Local migration: ~/.routecodex/config.json backed up and rewritten to use ${ENV}; exports appended to ~/.zshrc (no secrets in config after scan)\n- Doc: docs/config-secrets.md\nImplemented env-based apikey references (2026-02-04):\n- httpserver.apikey supports ${VAR} with fail-fast 500 when missing env: src/server/runtime/http-server/middleware.ts\n- Provider apikey auth.value supports ${VAR}/VAR/authfile-* references (resolved via resolveSecretValue): src/server/runtime/http-server/index.ts\n- init templates + configsamples now use ${*_API_KEY} instead of plaintext placeholders: src/cli/config/init-provider-catalog.ts + configsamples/*\n- Docs: docs/config-secrets.md\n- Tests: tests/server/http-server/apikey-secret-resolution.spec.ts + tests/server/http-server/httpserver-apikey-env-resolution.spec.ts\nVerification:\n- npm run build:dev (passed; includes install:global + e2e + blackbox antigravity parity).","status":"closed","priority":0,"issue_type":"task","assignee":"RouteCodex Bot","owner":"bot@routecodex.com","created_at":"2026-02-04T10:36:53.547146+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-04T10:52:02.089164+08:00","closed_at":"2026-02-04T10:49:33.15191+08:00","labels":["config","security"]}
{"id":"routecodex-8","title":"Qwen OAuth ç™»å½•å token ä¸ç”Ÿæ•ˆï¼ˆtokenFile è§£æ/è¯»å–ï¼‰","description":"## Problem\nQwen OAuth è®¤è¯æˆåŠŸåï¼Œåç»­è¯·æ±‚ä»æç¤ºæœªè®¤è¯/éœ€è¦é‡æ–°ç™»å½•ï¼›æ€€ç–‘ token å·²å†™å…¥ä½†è¿è¡Œæ—¶è¯»å–ä¸åˆ°æˆ– tokenFile alias è§£æä¸ä¸€è‡´ã€‚\n\n## Suspected Root Cause\n- daemon-admin / oauth-lifecycle æ”¯æŒ tokenFile=aliasï¼ˆä¾‹å¦‚ defaultï¼‰ï¼Œä¼šå†™å…¥ ~/.routecodex/auth/qwen-oauth-\u003cseq\u003e-\u003calias\u003e.json\n- TokenFileAuthProvider å°† tokenFile=alias å½“ä½œè·¯å¾„å¤„ç†ï¼Œä¸”æ—  tokenFile æ—¶é»˜è®¤åªæ‰¾ ~/.routecodex/tokens/qwen-default.jsonï¼Œå¯¼è‡´æ‰¾ä¸åˆ°åˆšå†™å…¥çš„ auth ç›®å½• token\n\n## Acceptance Criteria\n- TokenFileAuthProvider æ”¯æŒ tokenFile=aliasï¼ˆä¸ oauth-lifecycle ä¸€è‡´ï¼‰ï¼Œå¯è¯»å– ~/.routecodex/auth/qwen-oauth-\u003cseq\u003e-\u003calias\u003e.jsonï¼ˆä¼˜å…ˆæœ€æ–° seqï¼‰\n- TokenFileAuthProvider æ—  tokenFile æ—¶ï¼Œä¼˜å…ˆè¯»å– ~/.routecodex/auth/qwen-oauth.json åŠ auth ç›®å½•ä¸‹ qwen-oauth-*.jsonï¼ˆå…¼å®¹ daemon oauth æˆæƒï¼‰\n- å¢åŠ  Jest å›å½’æµ‹è¯•è¦†ç›–ä¸Šè¿°è¡Œä¸º","notes":"Root cause confirmed: daemon-admin/oauth-lifecycle persists Qwen OAuth tokens under ~/.routecodex/auth/qwen-oauth-\u003cseq\u003e-\u003calias\u003e.json (or alias-based), but TokenFileAuthProvider treated tokenFile=alias as a path and (when tokenFile missing) only searched ~/.routecodex/tokens/qwen-default.json / ~/.cli-proxy-api, so it never found the saved token.\n\nFix:\n- TokenFileAuthProvider now supports tokenFile=alias (no / and no .json) -\u003e resolves to latest seq file in auth dir for that alias.\n- For qwen, if tokenFile points to legacy ~/.routecodex/auth/qwen-oauth.json but file missing, fall back to latest qwen-oauth-*.json.\n- For qwen with no tokenFile, prefer ~/.routecodex/auth/qwen-oauth.json then latest qwen-oauth-*.json.\n\nEvidence:\n- Jest: npm run jest:run -- --runTestsByPath tests/providers/auth/tokenfile-auth.qwen-alias.spec.ts\n- dist sanity: node -e \"import { TokenFileAuthProvider } from \"./dist/providers/auth/tokenfile-auth.js\"; ...\" now shows isValid=true for tokenFile=default and builds Authorization header.","status":"closed","priority":0,"issue_type":"bug","assignee":"RouteCodex Bot","owner":"bot@routecodex.com","created_at":"2026-02-04T10:59:56.937277+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-04T11:25:46.326772+08:00","closed_at":"2026-02-04T11:25:46.326772+08:00","close_reason":"TokenFileAuthProvider æ”¯æŒ qwen tokenFile alias å¹¶æ‰«æ ~/.routecodex/authï¼Œä¿®å¤ç™»å½•åä¸ç”Ÿæ•ˆ","labels":["auth","bug","qwen"]}
{"id":"routecodex-9","title":"å¯¹é½é»˜è®¤ config.json çš„ Qwen tokenFileï¼ˆalias æœºåˆ¶ï¼‰","description":"## Problem\né»˜è®¤ç¤ºä¾‹é…ç½®ï¼ˆconfigsamples/config.json ç­‰ï¼‰é‡Œçš„ Qwen OAuth tokenFile ä»ä½¿ç”¨æ—§è·¯å¾„ ~/.routecodex/auth/qwen-oauth.jsonï¼Œå’Œå½“å‰ daemon-admin / oauth-lifecycle çš„ alias + qwen-oauth-\u003cseq\u003e-\u003calias\u003e.json æœºåˆ¶ä¸é…å¥—ï¼Œå®¹æ˜“å¯¼è‡´â€œç™»å½•åçœ‹èµ·æ¥ä¸ç”Ÿæ•ˆâ€ã€‚\n\n## Acceptance Criteria\n- é»˜è®¤ç¤ºä¾‹é…ç½®çš„ qwen.auth.tokenFile æ”¹ä¸º aliasï¼ˆæ¨è defaultï¼‰ï¼Œä¸ daemon-admin/oAuth-lifecycle è¡Œä¸ºä¸€è‡´\n- init æ¨¡æ¿ï¼ˆinit-provider-catalogï¼‰ä¸­çš„ qwen tokenFile ä¹Ÿä¸ä¹‹å¯¹é½\n- JSON è§£ææ ¡éªŒé€šè¿‡","notes":"Changed default/sample Qwen OAuth tokenFile to use alias (\"default\") to match oauth-lifecycle + daemon-admin behavior.\n\nChanges:\n- configsamples/config.json: qwen.auth.tokenFile = \"default\"\n- configsamples/provider/qwen/config.v1.json: qwen.auth.tokenFile = \"default\"\n- src/cli/config/init-provider-catalog.ts: qwen tokenFile = \"default\"\n- docs/PROVIDER_TYPES.md: qwen snippet updated\n\nEvidence:\n- JSON parse: node -e \"...JSON.parse(...)\"\n- Jest: npm run jest:run -- --runTestsByPath tests/providers/auth/tokenfile-auth.qwen-alias.spec.ts tests/providers/auth/oauth-lifecycle.qwen-enrich.spec.ts","status":"closed","priority":0,"issue_type":"task","assignee":"RouteCodex Bot","owner":"bot@routecodex.com","created_at":"2026-02-04T11:40:07.703912+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-04T11:41:48.400078+08:00","closed_at":"2026-02-04T11:41:48.400078+08:00","close_reason":"é»˜è®¤/ç¤ºä¾‹ config çš„ Qwen tokenFile æ”¹ä¸º alias=defaultï¼ˆé…å¥—ä¿å­˜/è¯»å–é€»è¾‘ï¼‰","labels":["auth","config","qwen"]}
{"id":"routecodex-a7e","title":"Epic: Beads ä»»åŠ¡ç®¡ç†è½åœ°","description":"æŠŠä»»åŠ¡ä» AGENTS.md ç§»åˆ° bdï¼ˆBeadsï¼‰ç»Ÿä¸€ç®¡ç†ï¼›AGENTS.md åªä¿ç•™é€šç”¨å·¥ä½œåè®® + bd ä½¿ç”¨è§„èŒƒã€‚","status":"closed","priority":1,"issue_type":"epic","owner":"bot@routecodex.com","created_at":"2026-02-03T12:14:10.688996+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T12:16:00.844009+08:00","closed_at":"2026-02-03T12:16:00.844009+08:00","close_reason":"All children completed"}
{"id":"routecodex-a7e.1","title":"Chore: æ¸…ç† AGENTS.mdï¼ˆä»…ä¿ç•™é€šç”¨è§„åˆ™ + bd ä½¿ç”¨ï¼‰","description":"ç§»é™¤è¿‡æ—¶çš„ Skills / Landing the Plane ç­‰å†…å®¹ï¼›æ–°å¢ Beads/bd çš„ä»“åº“çº§ä½¿ç”¨çº¦å®šä¸å‘½ä»¤é€ŸæŸ¥ã€‚","notes":"å·²æ¸…ç† AGENTS.mdï¼šç§»é™¤è¿‡æ—¶æ®µè½ï¼›æ–°å¢ Beads/bd ä½¿ç”¨è§„èŒƒä¸å‘½ä»¤é€ŸæŸ¥ï¼ˆè§ AGENTS.mdï¼‰ã€‚","status":"closed","priority":1,"issue_type":"task","owner":"bot@routecodex.com","created_at":"2026-02-03T12:14:11.005415+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T12:15:53.614663+08:00","closed_at":"2026-02-03T12:15:53.614666+08:00","dependencies":[{"issue_id":"routecodex-a7e.1","depends_on_id":"routecodex-a7e","type":"parent-child","created_at":"2026-02-03T12:14:11.006014+08:00","created_by":"RouteCodex Bot"}]}
{"id":"routecodex-a7e.2","title":"Chore: åœ¨ bd å†…åˆ›å»ºä»»åŠ¡ç®¡ç†è§„åˆ™ï¼ˆreferenceï¼‰","description":"å‚è€ƒå¡ç‰‡ï¼š\\n- bd ready / bd list / bd show\\n- bd create --parent \u003cepic\u003e\\n- ä¾èµ–ï¼šbd dep add \u003cblocked\u003e \u003cblocker\u003eï¼ˆé¿å…æŠŠ parent-child ä¹Ÿåšæˆ depï¼Œé˜²æ­¢ cycleï¼‰\\n- çŠ¶æ€ï¼šopen / in_progress / blocked / closed\\n- Epicï¼šç”¨ bd epic status è¿½è¸ªå®Œæˆåº¦ï¼›epic æœ¬èº«å¯è®¾ä¸º blockedï¼Œé¿å…å‡ºç°åœ¨ ready åˆ—è¡¨\\n- æ¨èï¼šbd init --stealthï¼ˆä¿æŒ .beads åªåœ¨æœ¬åœ°ï¼‰","notes":"å·²æ·»åŠ  reference è§„åˆ™å¡ï¼ˆæœ¬ issue å³ä¸ºè§„åˆ™å­˜æ¡£ï¼‰ã€‚","status":"closed","priority":1,"issue_type":"task","owner":"bot@routecodex.com","created_at":"2026-02-03T12:14:11.27531+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T12:15:53.518182+08:00","closed_at":"2026-02-03T12:15:53.518184+08:00","dependencies":[{"issue_id":"routecodex-a7e.2","depends_on_id":"routecodex-a7e","type":"parent-child","created_at":"2026-02-03T12:14:11.275868+08:00","created_by":"RouteCodex Bot"}]}
{"id":"routecodex-j64","title":"Chore: åˆ‡æ¢ Beads ä¸º --no-dbï¼ˆissues.jsonl ä½œä¸ºå”¯ä¸€æ¥æºï¼‰","description":"ç›®æ ‡ï¼šåç»­æ–°å¢éœ€æ±‚ç»Ÿä¸€ç”¨ bd --no-db ç»´æŠ¤åˆ° .beads/issues.jsonlï¼ˆå¯ç‰ˆæœ¬åŒ–ï¼‰ï¼›å¿½ç•¥ .beads/*.db ç­‰æœ¬åœ°çŠ¶æ€æ–‡ä»¶ã€‚\\n\\néªŒæ”¶ï¼š\\n- .beads/issues.jsonl åŒ…å«å½“å‰ issues\\n- bd --no-db list/ready æ­£å¸¸å·¥ä½œ\\n- AGENTS.md å†™æ˜çº¦æŸï¼šæ–°å¢éœ€æ±‚å¿…é¡»å…ˆè½åˆ° bdï¼ˆ--no-dbï¼‰","notes":"å·²å®Œæˆï¼š\\n- å¯¼å‡ºå½“å‰ issues åˆ° .beads/issues.jsonl\\n- AGENTS.md çº¦æŸæ–°å¢éœ€æ±‚å¿…é¡»å…ˆç”¨ bd --no-db å»ºç«‹ issue\\n- .gitignore: ä»…è·Ÿè¸ª .beads/issues.jsonlï¼Œå¿½ç•¥å…¶å®ƒ .beads/*\\n","status":"closed","priority":1,"issue_type":"task","owner":"bot@routecodex.com","created_at":"2026-02-03T12:19:50.714931+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T19:28:31.384104+08:00","closed_at":"2026-02-03T12:20:48.417164+08:00"}
{"id":"routecodex-x7e","title":"Epic: Quota Manager + Routing Refactor V3","description":"æ‹†åˆ† VirtualRouter çš„å¥åº·/é…é¢ä¸º QuotaManagerï¼ˆå”¯ä¸€äº§å‡ºï¼‰ï¼Œå¹¶æŠŠ WebUI/æ§åˆ¶å¹³é¢/è·¯ç”±ç­–ç•¥/å‘½ä¸­æ—¥å¿—/ServerTool å‘½ä¸­è§£è€¦æˆå¯ç‹¬ç«‹æ¼”è¿›çš„æ¨¡å—ã€‚\\n\\néªŒæ”¶ï¼š\\n- QuotaManager ç»Ÿä¸€ cooldown/blacklist/quota/auth-verifyï¼ˆper provider.modelï¼‰\\n- WebUI åªèµ° /daemon/control/snapshot + /daemon/control/mutate\\n- è·¯ç”±è´Ÿè½½ç­–ç•¥ç®—æ³•/æ•°æ®è§£è€¦ï¼ˆæ‰€æœ‰ pool å¤ç”¨åŒç®—æ³•ï¼‰\\n- è·¯ç”±å‘½ä¸­ä¸ servertool å‘½ä¸­æˆä¸ºç‹¬ç«‹ç®¡é“èŠ‚ç‚¹","notes":"blocked by children: routecodex-x7e.3, routecodex-x7e.4, routecodex-x7e.5","status":"blocked","priority":0,"issue_type":"epic","owner":"bot@routecodex.com","created_at":"2026-02-03T12:05:16.701038+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T12:09:30.839063+08:00"}
{"id":"routecodex-x7e.1","title":"QuotaManagerï¼šé…é¢/å¥åº·/å†·å´ç»Ÿä¸€ä¸­å¿ƒï¼ˆV3ï¼‰","description":"ç›®æ ‡ï¼šVirtualRouter ä¸å†è‡ªäº§ç”Ÿ cooldown/å¥åº·å†³ç­–ï¼›ç»Ÿä¸€ä» llmswitch-core QuotaManager è¾“å‡º quotaViewã€‚\\n\\nå·¥ä½œé¡¹ï¼š\\n- core: sharedmodule/llmswitch-core/src/quota/*ï¼ˆQuotaManager + storeï¼‰\\n- host: routecodex quota module è®¢é˜… provider error/success -\u003e core QuotaManager\\n- 402 å¤„ç†ï¼šblacklistUntil(resetAt/é…ç½®)ï¼Œé»˜è®¤ reset=12:00 local\\n- antigravity auth-verify/thought-signature ç­–ç•¥ç»Ÿä¸€è¿›å…¥ QuotaManager\\n\\néªŒæ”¶ï¼š\\n- VirtualRouter æ³¨å…¥ quotaView åï¼Œå¥åº·/å†·å´ä»¥ quotaView ä¸ºå‡†\\n- WebUI èƒ½çœ‹åˆ° cooldown/blacklist çŠ¶æ€","notes":"å·²å®ç°ï¼ˆæœ¬å·¥ä½œåŒºï¼‰ï¼š\\n- core: sharedmodule/llmswitch-core/src/quota/*ï¼ˆQuotaManager + apikey resetï¼‰\\n- host: src/manager/modules/quota/antigravity-quota-manager.ts ä½¿ç”¨ llmsBridge.createCoreQuotaManager + quotaView æ³¨å…¥\\n- docs: docs/QUOTA_MANAGER_V3.md\\n- tests: npm run test:routing-instructionsï¼ˆå« quota ç›¸å…³ç”¨ä¾‹ï¼‰\\n\nåŸºç¡€å®ç°å·²å®Œæˆï¼›ä»¥ä¸‹ä¸ºæ–°å¢/è¡¥é½éœ€æ±‚çš„æ‹†åˆ†ä»»åŠ¡ã€‚\n\næ‹†åˆ†ä¸ºå­ä»»åŠ¡ï¼šx7e.1.1~x7e.1.4ï¼ˆä»¥å­ä»»åŠ¡ä¸ºå‡†æ¨è¿›ä¸éªŒæ”¶ï¼‰ã€‚","status":"in_progress","priority":0,"issue_type":"epic","assignee":"RouteCodex Bot","owner":"bot@routecodex.com","created_at":"2026-02-03T12:06:53.224513+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T19:28:31.384807+08:00","dependencies":[{"issue_id":"routecodex-x7e.1","depends_on_id":"routecodex-x7e","type":"parent-child","created_at":"2026-02-03T12:06:53.225112+08:00","created_by":"RouteCodex Bot"}]}
{"id":"routecodex-x7e.1.1","title":"Quota resetAt è§„åˆ™ï¼šconfig/é»˜è®¤/æ—¶åŒº","description":"å®šä¹‰ 402/å†·å´çš„ resetAt è®¡ç®—è§„åˆ™ä¸å¯é…ç½®é¡¹ï¼ˆæœªé…ç½®æ—¶é»˜è®¤åˆ° 12:00 æœ¬åœ°æ—¶é—´ï¼Œéœ€ä¸ç°æœ‰å®ç°å¯¹é½ï¼‰ã€‚\n\nä¼˜å…ˆçº§ï¼šupstream resetAt \u003e config resetAt \u003e default 12:00 localã€‚\nå…¼å®¹ï¼šå¦‚æœ upstream æä¾› resetAt=UTCï¼Œéœ€è¦æ­£ç¡®æ¢ç®—åˆ°æœ¬åœ°å±•ç¤ºã€‚","acceptance_criteria":"- å¯åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½® resetAt è§„åˆ™ï¼ˆæ–‡æ¡£å†™æ¸…å­—æ®µ/ç¤ºä¾‹ï¼‰ã€‚\n- 402 æœªæä¾› resetAt æ—¶ï¼ŒblacklistUntil ä½¿ç”¨ config/default è®¡ç®—ã€‚\n- å•æµ‹è¦†ç›–ï¼šè·¨æ—¶åŒº/å¤ä»¤æ—¶è¾¹ç•Œï¼ˆè‡³å°‘ 2 ä¾‹ï¼‰ã€‚","notes":"\næ‰§è¡Œé¡ºåºï¼šå…ˆè½ config å­—æ®µ/é»˜è®¤è§„åˆ™/æµ‹è¯•ï¼Œå†æ¨è¿› x7e.1.2ï¼ˆ402 å¤„ç†ï¼‰ã€‚\n\nå®Œæˆï¼š\n- æ”¯æŒ config: virtualrouter.quota.apikeyDailyResetTimeï¼ˆHH:MM / HH:MMZï¼‰å¹¶åœ¨ runtime init æ—¶æ³¨å†Œåˆ° quota moduleï¼ˆapikey onlyï¼‰ã€‚\n- æ–‡æ¡£è¡¥å……é…ç½®ç¤ºä¾‹ï¼šdocs/QUOTA_MANAGER_V3.mdã€‚\n- å›å½’ï¼šnpm run test:routing-instructions é€šè¿‡ï¼›llmswitch-core: npm run test:quota-managerï¼ˆæ–°å¢ DST local reset ç”¨ä¾‹ï¼‰é€šè¿‡ã€‚","status":"closed","priority":0,"issue_type":"task","assignee":"RouteCodex Bot","owner":"bot@routecodex.com","created_at":"2026-02-03T12:37:36.030193+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T13:03:43.785536+08:00","closed_at":"2026-02-03T13:03:43.785536+08:00","dependencies":[{"issue_id":"routecodex-x7e.1.1","depends_on_id":"routecodex-x7e.1","type":"parent-child","created_at":"2026-02-03T19:28:31.405335+08:00","created_by":"import"}]}
{"id":"routecodex-x7e.1.2","title":"402 insufficient_quotaï¼šblacklistUntil(resetAt) + quota=0","description":"é‡åˆ° HTTP 402ï¼ˆinsufficient_quota / daily_cost_limit_exceeded ç­‰ï¼‰æ—¶ï¼Œç»Ÿä¸€ç”± QuotaManager è®°å½•ï¼š\n- quota=0\n- cooldown/blacklistUntil=resetAtï¼ˆä¼˜å…ˆç”¨ upstream resetAtï¼‰\nå¹¶ç¡®ä¿ VirtualRouter çœ‹åˆ° quotaView åä¸ä¼šç»§ç»­å‘½ä¸­è¯¥ keyã€‚","acceptance_criteria":"- 402 ååŒ provider.model ä¸å†è¢«é€‰ä¸­ï¼ˆç›´åˆ° resetAt æˆ–æ‰‹åŠ¨æ¢å¤ï¼‰ã€‚\n- resetAt åˆ°æœŸåè‡ªåŠ¨æ¢å¤å¯ç”¨ï¼ˆæˆ– quota\u003e0 åå¯ç”¨ï¼Œä¾å®ç°å†³å®šå¹¶å†™æ˜ï¼‰ã€‚\n- é€šè¿‡ /daemon/control/snapshot å¯è§‚å¯Ÿåˆ° cooldown/blacklistUntilã€‚","notes":"\nå®Œæˆï¼š\n- llmswitch-core QuotaManager 402 resetAt æå–å¢å¼ºï¼šæ”¯æŒä» provider error message / upstreamMessage ä¸­è§£æå†…åµŒ JSON çš„ resetAtï¼ˆä¸å†è¦æ±‚ details.resetAtï¼‰ã€‚\n- å›å½’ï¼šsharedmodule/llmswitch-core npm run test:quota-manager é€šè¿‡ï¼›routecodex npm run test:routing-instructions é€šè¿‡ã€‚","status":"closed","priority":0,"issue_type":"bug","owner":"bot@routecodex.com","created_at":"2026-02-03T12:37:36.153923+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T13:07:37.560877+08:00","closed_at":"2026-02-03T13:07:37.560877+08:00","dependencies":[{"issue_id":"routecodex-x7e.1.2","depends_on_id":"routecodex-x7e.1","type":"parent-child","created_at":"2026-02-03T19:28:31.405824+08:00","created_by":"import"},{"issue_id":"routecodex-x7e.1.2","depends_on_id":"routecodex-x7e.1.1","type":"blocks","created_at":"2026-02-03T19:28:31.406273+08:00","created_by":"import"}]}
{"id":"routecodex-x7e.1.3","title":"Quota æŒä¹…åŒ–ï¼šå¯åŠ¨æ¢å¤ + æ— æŒä¹…åŒ–è§£ç»‘è§„åˆ™","description":"éœ€è¦æŠŠ quota/cooldown/blacklistUntil æŒä¹…åŒ–åˆ°æœ¬åœ°ï¼Œå¹¶åœ¨è¿›ç¨‹é‡å¯åæ¢å¤ï¼›åŒæ—¶æ˜ç¡® claude/gemini session ç»‘å®šåœ¨â€œæ— æŒä¹…åŒ–/æŒä¹…åŒ–å¤±è´¥â€åœºæ™¯ä¸‹çš„è§£ç»‘ç­–ç•¥ã€‚","acceptance_criteria":"- é‡å¯å quotaView æ¢å¤ï¼ˆè‡³å°‘åŒ…å« cooldown/blacklistUntilï¼‰ã€‚\n- æŒä¹…åŒ–å¤±è´¥æ—¶ï¼šä¸ä¼šå†™å›åˆ° configï¼›ä¼šæŒ‰è§„åˆ™è§¦å‘è§£ç»‘å¹¶è®°å½•æ—¥å¿—ã€‚\n- æ–‡æ¡£è¡¥å……æŒä¹…åŒ–è·¯å¾„/æ ¼å¼/è¿ç§»ç­–ç•¥ã€‚","status":"open","priority":1,"issue_type":"task","owner":"bot@routecodex.com","created_at":"2026-02-03T12:37:36.270802+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T12:37:36.270802+08:00","dependencies":[{"issue_id":"routecodex-x7e.1.3","depends_on_id":"routecodex-x7e.1","type":"parent-child","created_at":"2026-02-03T19:28:31.406811+08:00","created_by":"import"}]}
{"id":"routecodex-x7e.1.4","title":"Quota mutateï¼šæ‰‹åŠ¨æ¢å¤/è°ƒæ•´ quota + æ¸… cooldown","description":"å¯¹æ¥ control planeï¼š/daemon/control/mutate æä¾›ç»Ÿä¸€çš„ quota.* æ“ä½œï¼ˆæ¢å¤ã€è®¾ç½® quotaã€æ¸… cooldown/blacklistï¼‰ï¼Œå¹¶è½åˆ° QuotaManager ä½œä¸ºå”¯ä¸€å†™å…¥å£ã€‚","acceptance_criteria":"- mutate æ”¯æŒè‡³å°‘ 3 ç±»æ“ä½œï¼šclearCooldownã€setQuotaã€restoreNowï¼ˆåç§°ä»¥å®ç°ä¸ºå‡†ï¼‰ã€‚\n- æ“ä½œå snapshot ç«‹åˆ»å¯è§å¹¶å½±å“è·¯ç”±é€‰æ‹©ã€‚\n- æœ‰æœ€å°é‰´æƒ/å®‰å…¨è¯´æ˜ï¼ˆä»…æœ¬åœ°/ç®¡ç†å‘˜ï¼‰ã€‚","status":"open","priority":1,"issue_type":"task","owner":"bot@routecodex.com","created_at":"2026-02-03T12:37:36.391064+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T12:37:36.391064+08:00","dependencies":[{"issue_id":"routecodex-x7e.1.4","depends_on_id":"routecodex-x7e.1","type":"parent-child","created_at":"2026-02-03T19:28:31.407317+08:00","created_by":"import"},{"issue_id":"routecodex-x7e.1.4","depends_on_id":"routecodex-x7e.1.2","type":"blocks","created_at":"2026-02-03T19:28:31.407785+08:00","created_by":"import"}]}
{"id":"routecodex-x7e.1.5","title":"WebUI QuotaPool Reset æœªæ¸… model-capacity cooldown","description":"ç°è±¡ï¼šdaemon-admin WebUI çš„ Quota Pool å¤šé€‰ provider åç‚¹ Resetï¼Œåªé‡ç½® quotaStateï¼Œä½† provider ä»æ˜¾ç¤ºä¸å¯ç”¨ï¼ˆcooldown/ç±»ä¼¼é»‘åå•ï¼‰ï¼Œå¯¼è‡´ VirtualRouter ç»§ç»­ä¸é€‰å®ƒã€‚\\n\\nå¤ç°ï¼šWebUI â†’ Quota Pool â†’ å‹¾é€‰å¤šä¸ª provider â†’ Reset â†’ åˆ·æ–°åä»çœ‹åˆ° reason=cooldown:model-capacity æˆ– cooldownUntil ä»åœ¨æœªæ¥ã€‚\\n\\nåŸå› ï¼šProviderQuotaDaemonModule.resetProvider() æ²¡æœ‰æ¸…ç† ProviderModelBackoffTracker(modelBackoff) çš„ capacity backoffï¼›quotaView ä¼šæŠŠ modelBackoff å åŠ æˆ cooldownUntil/reasonï¼Œä»è€Œç»§ç»­ gate selectionã€‚","acceptance_criteria":"1) Reset(å•ä¸ª/å¤šé€‰) åï¼Œè‹¥ä»…å› ä¸º modelBackoff å¯¼è‡´ cooldownï¼Œåˆ™ quotaView(providerKey).cooldownUntil å˜ä¸º null ä¸” reason=okã€‚\\n2) Recover ä¹ŸåŒæ ·æ¸…ç† modelBackoffã€‚\\n3) å›å½’æµ‹è¯•è¦†ç›–ï¼šresetProvider clears modelBackoff.","notes":"Fix implemented (2026-02-04):\\n- Clear modelBackoff on reset/recover so cooldown:model-capacity doesnâ€™t persist after WebUI Reset.\\n- Code: src/manager/modules/quota/provider-quota-daemon.model-backoff.ts (add clearAll), src/manager/modules/quota/provider-quota-daemon.ts (reset/resetProvider/recoverProvider).\\n- Test: tests/manager/quota/provider-quota-daemon-module.spec.ts (resetProvider clears modelBackoff).\\nVerification:\\n- npm run build:dev (passed; includes install:global + e2e + mock:regressions + blackbox antigravity parity).\nDelivered:\\n- Commit: 1b9290035\\n- Verified via npm run build:dev (includes install:global + mock:regressions + test:blackbox-antigravity-parity).","status":"closed","priority":1,"issue_type":"bug","owner":"bot@routecodex.com","created_at":"2026-02-04T08:44:49.052117+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-04T08:46:40.782834+08:00","closed_at":"2026-02-04T08:46:29.478568+08:00","dependencies":[{"issue_id":"routecodex-x7e.1.5","depends_on_id":"routecodex-x7e.1","type":"parent-child","created_at":"2026-02-04T08:46:04.903571+08:00","created_by":"import"}]}
{"id":"routecodex-x7e.1.6","title":"daemon-admin: Reset provider-quota module æŒ‰é’®åœ¨æ–°æ¶æ„æ— æ•ˆ","description":"ç°è±¡ï¼šdaemon-admin WebUI çš„æŒ‰é’® \"Reset provider-quota module\" è°ƒç”¨ /daemon/modules/provider-quota/resetï¼Œä½†å½“å‰è¿›ç¨‹åªæ³¨å†Œ quota æ¨¡å—ï¼ˆid=quotaï¼‰ï¼Œæœªæ³¨å†Œ provider-quota æ¨¡å—ï¼ˆid=provider-quotaï¼‰ï¼Œå¯¼è‡´ç‚¹å‡»åæ— æ•ˆæœï¼ˆmodule not foundï¼‰ã€‚\\n\\né¢„æœŸï¼šè¯¥æŒ‰é’®ç”¨äºæ¸…ç† quotaView çš„ cooldown/blacklistï¼ˆåŒ…æ‹¬æ‰‹åŠ¨ offline + 429 é€€é¿ç­‰æœ¬åœ°çŠ¶æ€ï¼‰ï¼Œè®© VirtualRouter é‡æ–°å¯é€‰ã€‚\\n\\nå¤„ç†ï¼šåœ¨ /daemon/modules/:id/reset ä¸­ä¸º id=provider-quota ä¸” module ä¸å­˜åœ¨æ—¶åšæ˜¾å¼ fallbackï¼šè°ƒç”¨ quota.getAdminSnapshot() æšä¸¾ providerKeysï¼Œå¹¶é€ä¸ª quota.resetProvider(key) + persistNowï¼Œå† refreshNow ä»¥ä¾¿ antigravity ç«‹å³å›æ‹‰çœŸå®é…é¢ã€‚","acceptance_criteria":"1) å½“ provider-quota module ä¸å­˜åœ¨æ—¶ï¼ŒPOST /daemon/modules/provider-quota/reset è¿”å› 200 ä¸” body.fallback.kind=quota.reset-allã€‚\\n2) fallback ä¼šå¯¹ snapshot ä¸­æ‰€æœ‰ providerKeys è°ƒç”¨ resetProviderï¼Œå¹¶è§¦å‘ persistNowã€‚\\n3) Jest è¦†ç›–è¯¥ fallback è¡Œä¸ºã€‚","notes":"Implemented fallback (2026-02-04):\\n- When POST /daemon/modules/provider-quota/reset hits 404 (module absent), server now falls back to quota module: enumerate providerKeys via getAdminSnapshot, call resetProvider for each, persistNow, then refreshNow.\\n- Code: src/server/runtime/http-server/daemon-admin/status-handler.ts (reset route).\\n- Test: tests/server/daemon-admin/status-handler-reset-provider-quota-fallback.spec.ts (covers cookie auth + fallback).\\nEvidence:\\n- Jest: npm run jest:run -- --runTestsByPath tests/server/daemon-admin/status-handler-reset-provider-quota-fallback.spec.ts (pass).\\n- Verified via npm run build:dev (pass, includes install:global + blackbox antigravity parity).\\n- Commit: ae5e94b6f","status":"closed","priority":1,"issue_type":"bug","owner":"bot@routecodex.com","created_at":"2026-02-04T10:46:37.368051+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-04T10:47:32.923497+08:00","closed_at":"2026-02-04T10:47:24.260308+08:00","dependencies":[{"issue_id":"routecodex-x7e.1.6","depends_on_id":"routecodex-x7e.1","type":"parent-child","created_at":"2026-02-04T10:46:59.555472+08:00","created_by":"import"}]}
{"id":"routecodex-x7e.2","title":"Control planeï¼šWebUI å•å…¥å£ snapshot/mutate","description":"ç›®æ ‡ï¼šWebUI åªä¾èµ–ä¸€ä¸ªç«¯å£ï¼Œç»Ÿä¸€ï¼šserver discoveryã€broadcast restartã€quota æ“ä½œã€è·¯ç”±/å‘½ä¸­è§‚æµ‹ã€‚\\n\\næ¥å£ï¼š\\n- GET /daemon/control/snapshot\\n- POST /daemon/control/mutateï¼ˆservers.restart / quota.* / runtime.restartï¼‰\\n\\néªŒæ”¶ï¼š\\n- daemon-admin UI æœ‰ Control tab ä¸”å¯æ“ä½œ","notes":"å·²å®ç°ï¼ˆæœ¬å·¥ä½œåŒºï¼‰ï¼š\\n- API: src/server/runtime/http-server/daemon-admin/control-handler.tsï¼ˆ/daemon/control/snapshot, /daemon/control/mutateï¼‰\\n- UI: docs/daemon-admin-ui.htmlï¼ˆControl tabï¼‰\\n- docs: docs/DAEMON_CONTROL_PLANE.md\\n- CLI: src/cli/commands/restart.ts æ”¯æŒ broadcast + --port\\n- tests: npm run test:routing-instructionsï¼ˆå« daemon-admin / quota refresh e2eï¼‰\\n","status":"closed","priority":0,"issue_type":"task","owner":"bot@routecodex.com","created_at":"2026-02-03T12:06:53.347752+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T12:07:08.638808+08:00","closed_at":"2026-02-03T12:07:08.63881+08:00","dependencies":[{"issue_id":"routecodex-x7e.2","depends_on_id":"routecodex-x7e","type":"parent-child","created_at":"2026-02-03T12:06:53.348295+08:00","created_by":"RouteCodex Bot"}]}
{"id":"routecodex-x7e.3","title":"VirtualRouterï¼šè·¯ç”±ç­–ç•¥/è´Ÿè½½ç®—æ³•é‡æ„","description":"ç›®æ ‡ï¼šrouting selection ç®—æ³•ä¸æ•°æ®åˆ†ç¦»ï¼›åŒç®—æ³•é€‚é…ä¸åŒ pool é…ç½®ï¼›ä¸º WebUI ç»Ÿä¸€ç¼–è¾‘å…¥å£å‡†å¤‡ã€‚\\n\\nå·¥ä½œé¡¹ï¼š\\n- æŠ½è±¡ load balancer/selection deps\\n- sticky/å¥åº·åº¦é€»è¾‘æ”¶æ•›ï¼ˆå°½é‡ç”± quota manager é©±åŠ¨ï¼‰\\n- ç»Ÿä¸€ç­–ç•¥é…ç½®ç»“æ„å¹¶å¯åºåˆ—åŒ–","status":"in_progress","priority":0,"issue_type":"epic","assignee":"RouteCodex Bot","owner":"bot@routecodex.com","created_at":"2026-02-03T12:06:53.472515+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T19:28:31.385275+08:00","dependencies":[{"issue_id":"routecodex-x7e.3","depends_on_id":"routecodex-x7e","type":"parent-child","created_at":"2026-02-03T12:06:53.473117+08:00","created_by":"RouteCodex Bot"}]}
{"id":"routecodex-x7e.3.1","title":"WebUIï¼šè·¯ç”±ç­–ç•¥ Form UIï¼ˆrouting/loadBalancing ç¼–è¾‘ + å†™ config + restartï¼‰","description":"ä» task.md è¿ç§»ï¼šQuota Manager V3 + Control Plane çš„æœªå®Œæˆé¡¹ã€‚\\n\\nç›®æ ‡ï¼šåœ¨ daemon-admin UI æä¾›è·¯ç”±ç­–ç•¥ç¼–è¾‘è¡¨å•ï¼š\\n- ç¼–è¾‘ routing.targets / loadBalancing\\n- å†™å› configï¼ˆ~/.routecodex/config.json æˆ–æŒ‡å®šè·¯å¾„ï¼‰\\n- è§¦å‘ restartï¼ˆbroadcast/port æŒ‡å®šï¼‰\\n\\néªŒæ”¶ï¼š\\n- UI å¯ç¼–è¾‘å¹¶ä¿å­˜ config\\n- ä¿å­˜åå¯ä¸€é”®é‡å¯å¹¶ç”Ÿæ•ˆï¼ˆstatus/version å¯¹é½ï¼‰","status":"open","priority":0,"issue_type":"task","owner":"bot@routecodex.com","created_at":"2026-02-03T12:35:10.653566+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T12:35:10.653566+08:00","dependencies":[{"issue_id":"routecodex-x7e.3.1","depends_on_id":"routecodex-x7e.3","type":"parent-child","created_at":"2026-02-03T19:28:31.408312+08:00","created_by":"import"},{"issue_id":"routecodex-x7e.3.1","depends_on_id":"routecodex-x7e.3.5","type":"blocks","created_at":"2026-02-03T19:28:31.408759+08:00","created_by":"import"}]}
{"id":"routecodex-x7e.3.2","title":"Selection engineï¼šç®—æ³•/æ•°æ®åˆ†ç¦»ï¼ˆpool å¤ç”¨ï¼‰","description":"æŠŠ routing selection çš„ç®—æ³•ä¸æ•°æ®/çŠ¶æ€åˆ†ç¦»ï¼š\n- ç®—æ³•ï¼šçº¯å‡½æ•° + å¯æµ‹è¯•\n- æ•°æ®ï¼šquotaViewã€targetsã€session bindingï¼ˆå¦‚éœ€è¦ï¼‰\nç›®æ ‡ï¼šä¸åŒ pool åªæ¢é…ç½®ï¼Œä¸æ¢ç®—æ³•å®ç°ã€‚","acceptance_criteria":"- åŒä¸€ selection engine å¯æœåŠ¡å¤šä¸ª poolï¼ˆåªé€šè¿‡ config/inputs åŒºåˆ†ï¼‰ã€‚\n- æ–°å¢/è°ƒæ•´ç­–ç•¥ä¸éœ€è¦æ”¹åŠ¨ provider å±‚ã€‚\n- ä¸ºå…³é”®åˆ†æ”¯æä¾›å•æµ‹ï¼ˆè‡³å°‘ 3 ä¾‹ï¼šround-robinã€éšæœºã€ä¼˜å…ˆçº§ï¼‰ã€‚","notes":"\néªŒè¯/ç»“è®ºï¼š\n- é€‰æ‹©ç®—æ³•å·²ä¸ engine çŠ¶æ€è§£è€¦ï¼šsharedmodule/llmswitch-core/src/router/virtual-router/engine-selection.tsï¼ˆselectProviderImplï¼‰+ load balancerï¼ˆload-balancer.tsï¼‰+ tier-selection/sticky-pool ç­‰ã€‚\n- VirtualRouterEngine ä»…ç»„è£… deps/state å¹¶è°ƒç”¨ selectionï¼›ä¸åŒ pool å¤ç”¨åŒä¸€å¥—ç®—æ³•å®ç°ã€‚\n- è¦†ç›–ï¼štests/servertool/virtual-router-quota-routing.spec.ts / tests/servertool/virtual-router-priority-selection.spec.tsï¼›å›å½’ï¼šnpm run test:routing-instructions é€šè¿‡ã€‚","status":"closed","priority":0,"issue_type":"task","owner":"bot@routecodex.com","created_at":"2026-02-03T12:38:10.827368+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T13:19:05.525387+08:00","closed_at":"2026-02-03T13:19:05.525387+08:00","dependencies":[{"issue_id":"routecodex-x7e.3.2","depends_on_id":"routecodex-x7e.3","type":"parent-child","created_at":"2026-02-03T19:28:31.409259+08:00","created_by":"import"}]}
{"id":"routecodex-x7e.3.3","title":"ç§»é™¤ sticky + session binding è§„åˆ™é‡åšï¼ˆclaude/geminiï¼‰","description":"å½“å‰ sticky/å¥åº·åº¦ç­–ç•¥å¯¼è‡´æŸäº›æ¨¡å‹æ°¸è¿œä¸ä¼šè¢«å‘½ä¸­ã€‚éœ€è¦ï¼š\n- ç§»é™¤ sticky ä½œä¸ºè·¯ç”±ç®—æ³•çš„éšå¼å‰¯ä½œç”¨ï¼ˆæ”¹ä¸ºæ˜¾å¼ session lease / binding è§„åˆ™ï¼‰\n- ç»‘å®šå‰æï¼šé¦–æ¬¡æˆåŠŸå“åº”åæ‰ç»‘å®š\n- è§£ç»‘è§¦å‘ï¼šquota=0ã€alias è¢« blacklist/cooldownã€æ‰‹åŠ¨è§£ç»‘ã€æŒä¹…åŒ–ç¼ºå¤±/å¤±è´¥ã€reset åå¯é‡æ–°ç»‘å®š\n- æ–° session å¿…é¡»å¯é‡æ–°ç»‘å®š","acceptance_criteria":"- thinking pool ä¸­ claude/gemini å¯åœ¨æ»¡è¶³å¯ç”¨æ€§æ—¶è¢«è½®è¯¢å‘½ä¸­ã€‚\n- quota=0 æˆ– blacklist æ—¶ä¼šè§£ç»‘å¹¶è·³è¿‡è¯¥ targetã€‚\n- ç»‘å®š/è§£ç»‘äº‹ä»¶åœ¨æ—¥å¿—ä¸ control snapshot å¯è§‚æµ‹ã€‚","notes":"\næ‹†åˆ†ä¸ºå­ä»»åŠ¡ x7e.3.3.1~ï¼ˆå®ç°/éªŒè¯/æŒä¹…åŒ–åˆ†ç¦»ï¼‰ã€‚","status":"open","priority":0,"issue_type":"epic","owner":"bot@routecodex.com","created_at":"2026-02-03T12:38:10.944832+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T12:45:13.395857+08:00","dependencies":[{"issue_id":"routecodex-x7e.3.3","depends_on_id":"routecodex-x7e.3","type":"parent-child","created_at":"2026-02-03T19:28:31.409747+08:00","created_by":"import"}]}
{"id":"routecodex-x7e.3.3.1","title":"Session bindingï¼šé¦–æ¬¡æˆåŠŸç»‘å®š + quota/blacklist è§£ç»‘","description":"å®ç° claude/gemini çš„ session lease/binding æ ¸å¿ƒè§„åˆ™ï¼š\n- åªæœ‰é¦–æ¬¡æˆåŠŸå“åº”åæ‰ç»‘å®šåˆ° target\n- è§£ç»‘è§¦å‘ï¼šquota=0ã€blacklistUntil/cooldownã€alias blacklistã€æ‰‹åŠ¨è§£ç»‘\n- è§£ç»‘åå…è®¸åœ¨æ–°è¯·æ±‚é‡æ–°ç»‘å®š\n\næ³¨æ„ï¼šä¸ä¾èµ–æŒä¹…åŒ–ï¼ˆæŒä¹…åŒ–å•ç‹¬ä»»åŠ¡ï¼‰ã€‚","acceptance_criteria":"- thinking pool ä¸­ claude/gemini åœ¨å¯ç”¨æ—¶å¯è¢«è½®è¯¢å‘½ä¸­ï¼ˆä¸å†â€œæ°¸è¿œä¸ä¼šå‘½ä¸­â€ï¼‰ã€‚\n- quota=0 æˆ– blacklist æ—¶ç«‹å³è§£ç»‘å¹¶è·³è¿‡ã€‚\n- æ—¥å¿—ä¸ control snapshot å¯è§‚æµ‹ç»‘å®š/è§£ç»‘ã€‚","notes":"\nå®Œæˆ/è¡¥é½å¯è§‚æµ‹æ€§ï¼š\n- VirtualRouterEngine ä»…åœ¨ provider success æ—¶ commit session bindingï¼ˆå·²æœ‰ï¼‰ï¼›è¡¥å…… stage logï¼šç»‘å®š commit / quotaView è§¦å‘ release/unpinï¼ˆenv: ROUTECODEX_STAGE_LOGï¼‰ã€‚\n- Control plane snapshot æš´éœ² antigravity alias leasesï¼ˆbest-effort è¯»å– ~/.routecodex/state/antigravity-alias-leases.jsonï¼‰ï¼šGET /daemon/control/snapshot -\u003e routing.antigravityAliasLeasesã€‚\n- æµ‹è¯•ï¼štests/server/http-server/daemon-admin.e2e.spec.ts è¦†ç›– snapshot è¯»å– leases æ–‡ä»¶ï¼›å›å½’ï¼šnpm run test:routing-instructions é€šè¿‡ã€‚","status":"closed","priority":0,"issue_type":"task","owner":"bot@routecodex.com","created_at":"2026-02-03T12:45:13.499755+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T13:25:54.050329+08:00","closed_at":"2026-02-03T13:25:54.050329+08:00","dependencies":[{"issue_id":"routecodex-x7e.3.3.1","depends_on_id":"routecodex-x7e.3.3","type":"parent-child","created_at":"2026-02-03T19:28:31.410221+08:00","created_by":"import"},{"issue_id":"routecodex-x7e.3.3.1","depends_on_id":"routecodex-x7e.1.2","type":"blocks","created_at":"2026-02-03T19:28:31.410671+08:00","created_by":"import"}]}
{"id":"routecodex-x7e.3.3.2","title":"Session bindingï¼šæŒä¹…åŒ–/é‡å¯æ¢å¤ + æ— æŒä¹…åŒ–è§£ç»‘","description":"æŠŠ session binding çŠ¶æ€ä¸ QuotaManager æŒä¹…åŒ–è”åŠ¨ï¼š\n- é‡å¯åæ¢å¤ bindingï¼ˆå¦‚æœæŒä¹…åŒ–å¯ç”¨ï¼‰\n- æ— æŒä¹…åŒ–/æŒä¹…åŒ–å¤±è´¥æ—¶ï¼šæŒ‰è§„åˆ™è§£ç»‘ï¼ˆé¿å…ç²˜ä½ä¸å¯ç”¨ targetï¼‰\n- ä¸ quota resetAt åˆ°æœŸåçš„é‡æ–°ç»‘å®šè¡Œä¸ºå¯¹é½","acceptance_criteria":"- é‡å¯å binding çŠ¶æ€ç¬¦åˆé¢„æœŸï¼ˆæœ‰/æ— æŒä¹…åŒ–ä¸¤ç§è·¯å¾„ï¼‰ã€‚\n- æŒä¹…åŒ–ç¼ºå¤±ä¸ä¼šå¯¼è‡´æŸ target æ°¸ä¹…ç²˜ä½ã€‚\n- æœ‰é’ˆå¯¹æ€§çš„å›å½’æµ‹è¯•è¦†ç›–ã€‚","status":"open","priority":1,"issue_type":"task","owner":"bot@routecodex.com","created_at":"2026-02-03T12:45:13.601962+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T12:45:13.601962+08:00","dependencies":[{"issue_id":"routecodex-x7e.3.3.2","depends_on_id":"routecodex-x7e.3.3","type":"parent-child","created_at":"2026-02-03T19:28:31.411157+08:00","created_by":"import"},{"issue_id":"routecodex-x7e.3.3.2","depends_on_id":"routecodex-x7e.1.3","type":"blocks","created_at":"2026-02-03T19:28:31.411658+08:00","created_by":"import"}]}
{"id":"routecodex-x7e.3.4","title":"Availability gatingï¼šä»…ç”¨ quotaViewï¼ˆå»æ‰ legacy health/cooldown æ—è·¯ï¼‰","description":"VirtualRouter ä¸å†è‡ªäº§ç”Ÿå¥åº·åº¦/cooldown æ¨å¯¼ï¼›æ‰€æœ‰å¯ç”¨æ€§åˆ¤æ–­åªæ¥è‡ª QuotaManager è¾“å‡ºçš„ quotaViewï¼ˆper provider.modelï¼‰ã€‚\næ³¨æ„ï¼šä¿æŒ provider å±‚â€œåªåš transportâ€çš„çº¦æŸã€‚","acceptance_criteria":"- VirtualRouter ä¸å†å†™å…¥/æ¨å¯¼ cooldownï¼›åªè¯» quotaViewã€‚\n- healthmanager/legacy health è¾“å‡ºè¢«ç§»é™¤æˆ–ä»…ä¿ç•™è§‚æµ‹ï¼ˆä¸å½±å“è·¯ç”±ï¼‰ã€‚\n- ç›¸å…³è¡Œä¸ºé€šè¿‡è·¯ç”±æµ‹è¯•è¦†ç›–ã€‚","notes":"\néªŒè¯/è¡¥é½ï¼š\n- VirtualRouterEngine åœ¨ quotaView æ¨¡å¼ä¸‹ handleProviderError ç›´æ¥ returnï¼Œä¸å†äº§ç”Ÿ router-local cooldown TTLï¼›updateDeps(enable quotaView) ä¼šæ¸…ç©º providerCooldownsã€‚\n- æ–°å¢å›å½’ç”¨ä¾‹ï¼štests/servertool/virtual-router-series-cooldown.spec.ts è¦†ç›–â€œquotaView enabled ä¸äº§ç”Ÿ cooldownâ€ã€‚\n- å›å½’ï¼šnpm run test:routing-instructions é€šè¿‡ã€‚","status":"closed","priority":0,"issue_type":"task","owner":"bot@routecodex.com","created_at":"2026-02-03T12:38:11.06094+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T13:11:52.755829+08:00","closed_at":"2026-02-03T13:11:52.755829+08:00","dependencies":[{"issue_id":"routecodex-x7e.3.4","depends_on_id":"routecodex-x7e.3","type":"parent-child","created_at":"2026-02-03T19:28:31.41216+08:00","created_by":"import"},{"issue_id":"routecodex-x7e.3.4","depends_on_id":"routecodex-x7e.1.2","type":"blocks","created_at":"2026-02-03T19:28:31.412634+08:00","created_by":"import"}]}
{"id":"routecodex-x7e.3.5","title":"Policy schemaï¼šå¯åºåˆ—åŒ– + Control snapshot/mutate å¯¹æ¥","description":"å®šä¹‰ç»Ÿä¸€çš„ routing policy æ•°æ®ç»“æ„ï¼ˆtargetsã€loadBalancingã€filtersã€weights ç­‰ï¼‰å¹¶å¯åºåˆ—åŒ–åˆ° configï¼›Control plane çš„ snapshot/mutate åªåšè¯»å†™/é‡å¯ï¼Œä¸åšè·¯ç”±å†³ç­–ã€‚","acceptance_criteria":"- snapshot æš´éœ² policyï¼ˆåªè¯»ï¼‰ä¸å…¶ç‰ˆæœ¬/hashã€‚\n- mutate æ”¯æŒå†™å…¥ policy å¹¶è§¦å‘ broadcast restartã€‚\n- docs è¯´æ˜ schema ä¸å…¼å®¹/è¿ç§»ç­–ç•¥ã€‚","notes":"\nå¼€å§‹ï¼šä¸‹ä¸€æ­¥è¡¥é½ policy hash + mutate å†™å…¥ policy + broadcast restartï¼ˆæŒ‰ x7e.3.5 éªŒæ”¶ï¼‰ã€‚\nImplemented control-plane routing policy schema + snapshot/mutate.\\n- Snapshot now exposes routing.policy + routing.policyHash.\\n- Mutate action routing.policy.set writes to configPath and triggers best-effort broadcast restart.\\nEvidence: npm run test:routing-instructions (passed on 2026-02-03).\\nFiles: src/server/runtime/http-server/daemon-admin/control-handler.ts, src/server/runtime/http-server/daemon-admin/routing-policy.ts, docs/ROUTING_POLICY_SCHEMA.md\nAdditional verification: npm run build:dev passed (includes install:global + blackbox antigravity parity) on 2026-02-03; global routecodex prints version 0.89.1663.","status":"closed","priority":1,"issue_type":"task","assignee":"RouteCodex Bot","owner":"bot@routecodex.com","created_at":"2026-02-03T12:38:11.176784+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T15:23:04.799622+08:00","closed_at":"2026-02-03T15:20:42.874319+08:00","dependencies":[{"issue_id":"routecodex-x7e.3.5","depends_on_id":"routecodex-x7e.3","type":"parent-child","created_at":"2026-02-03T19:28:31.413129+08:00","created_by":"import"},{"issue_id":"routecodex-x7e.3.5","depends_on_id":"routecodex-x7e.3.2","type":"blocks","created_at":"2026-02-03T19:28:31.4136+08:00","created_by":"import"},{"issue_id":"routecodex-x7e.3.5","depends_on_id":"routecodex-x7e.3.4","type":"blocks","created_at":"2026-02-03T19:28:31.414058+08:00","created_by":"import"}]}
{"id":"routecodex-x7e.3.6","title":"Docsï¼šè·¯ç”±ç­–ç•¥/ç»‘å®šè§„åˆ™/è¿ç§»è¯´æ˜","description":"è¡¥é½ docsï¼š\n- selection engine è¾“å…¥/è¾“å‡º\n- session binding è§„åˆ™ï¼ˆclaude/geminiï¼‰\n- quotaView gating åŸåˆ™\n- ä¸æ—§ç‰ˆ sticky/health çš„è¿ç§»è¯´æ˜","acceptance_criteria":"- docs å®Œæ•´å¯è¯»ï¼ˆå«ç¤ºä¾‹ configï¼‰ã€‚\n- èƒ½è¢« WebUI è¡¨å•å¤ç”¨ï¼ˆå­—æ®µå‘½åä¸€è‡´ï¼‰ã€‚","status":"open","priority":2,"issue_type":"chore","owner":"bot@routecodex.com","created_at":"2026-02-03T12:38:11.288638+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T12:38:11.288638+08:00","dependencies":[{"issue_id":"routecodex-x7e.3.6","depends_on_id":"routecodex-x7e.3","type":"parent-child","created_at":"2026-02-03T19:28:31.414568+08:00","created_by":"import"},{"issue_id":"routecodex-x7e.3.6","depends_on_id":"routecodex-x7e.3.5","type":"blocks","created_at":"2026-02-03T19:28:31.415054+08:00","created_by":"import"},{"issue_id":"routecodex-x7e.3.6","depends_on_id":"routecodex-x7e.3.3.2","type":"blocks","created_at":"2026-02-03T19:28:31.415556+08:00","created_by":"import"}]}
{"id":"routecodex-x7e.4","title":"Routing hitï¼šå‘½ä¸­/ç†ç”±/ç»Ÿè®¡ç‹¬ç«‹æ¨¡å—","description":"ç›®æ ‡ï¼švirtual-router-hitï¼ˆå« reason/stopMessage/penaltyï¼‰ä¸ stats è¾“å‡ºæœ‰å”¯ä¸€æ¨¡å—ã€‚\\n\\néªŒæ”¶ï¼š\\n- llmsStats / debug logger / webui å¤ç”¨åŒä¸€ä»½æ•°æ®","status":"open","priority":1,"issue_type":"task","owner":"bot@routecodex.com","created_at":"2026-02-03T12:06:53.5982+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T12:06:53.5982+08:00","dependencies":[{"issue_id":"routecodex-x7e.4","depends_on_id":"routecodex-x7e","type":"parent-child","created_at":"2026-02-03T12:06:53.598818+08:00","created_by":"RouteCodex Bot"}]}
{"id":"routecodex-x7e.5","title":"ServerToolï¼šå‘½ä¸­é€»è¾‘æŠ½ä¸º pipeline èŠ‚ç‚¹","description":"ç›®æ ‡ï¼šservertool match/execute ä» response conversion ä¸­æŠ½ç¦»æˆç‹¬ç«‹æµæ°´çº¿èŠ‚ç‚¹ï¼Œä¾¿äºæµ‹è¯•ä¸è§‚æµ‹ã€‚\\n\\néªŒæ”¶ï¼š\\n- no_servertool_match ç­‰æ—¥å¿—/æŒ‡æ ‡åœ¨ç»Ÿä¸€èŠ‚ç‚¹äº§ç”Ÿ","status":"open","priority":1,"issue_type":"task","owner":"bot@routecodex.com","created_at":"2026-02-03T12:06:53.721922+08:00","created_by":"RouteCodex Bot","updated_at":"2026-02-03T12:06:53.721922+08:00","dependencies":[{"issue_id":"routecodex-x7e.5","depends_on_id":"routecodex-x7e","type":"parent-child","created_at":"2026-02-03T12:06:53.722476+08:00","created_by":"RouteCodex Bot"}]}
