{
  "version": "1.0.0",
  "port": 5520,
  "host": "0.0.0.0",
  "virtualrouter": {
    "inputProtocol": "openai",
    "outputProtocol": "openai",
    "providers": {
      "qwen-provider": {
        "id": "qwen-provider",
        "type": "qwen",
        "enabled": true,
        "baseURL": "https://portal.qwen.ai/v1",
        "auth": {
          "type": "oauth",
          "clientId": "f0304373b74a44d2b584a3fb70ca9e56",
          "deviceCodeUrl": "https://chat.qwen.ai/api/v1/oauth2/device/code",
          "tokenUrl": "https://chat.qwen.ai/api/v1/oauth2/token",
          "scopes": ["openid", "profile", "email", "model.completion"],
          "tokenFile": "/Users/fanzhang/.qwen/oauth_creds.json"
        },
        "compatibility": {
          "type": "qwen-compatibility",
          "config": {
            "toolsEnabled": true,
            "streamingEnabled": true
          }
        },
        "models": {
          "qwen3-coder-plus": {
            "maxContext": 262144,
            "maxTokens": 262144,
            "temperature": 0.7,
            "supportsStreaming": true,
            "supportsTools": true
          },
          "qwen3-4b-thinking-2507-mlx": {
            "maxContext": 262144,
            "maxTokens": 262144,
            "temperature": 0.7,
            "supportsStreaming": true,
            "supportsTools": true
          },
          "qwen3-30b-a3b-instruct-2507-mlx": {
            "maxContext": 262144,
            "maxTokens": 262144,
            "temperature": 0.7,
            "supportsStreaming": true,
            "supportsTools": true
          },
          "qwen3-coder-480b-a35b-instruct-mlx": {
            "maxContext": 262144,
            "maxTokens": 262144,
            "temperature": 0.7,
            "supportsStreaming": true,
            "supportsTools": true
          }
        },
        "timeout": 60000,
        "retryAttempts": 3
      }
    },
    "routing": {
      "default": [
        "qwen-provider.qwen3-coder-plus"
      ],
      "anthropic": [
        "qwen-provider.qwen3-coder-plus"
      ],
      "background": [
        "qwen-provider.qwen3-coder-plus"
      ],
      "coding": [
        "qwen-provider.qwen3-coder-plus"
      ],
      "longcontext": [
        "qwen-provider.qwen3-coder-plus"
      ],
      "thinking": [
        "qwen-provider.qwen3-4b-thinking-2507-mlx"
      ],
      "tools": [
        "qwen-provider.qwen3-coder-plus"
      ],
      "vision": [
        "qwen-provider.qwen3-coder-plus"
      ],
      "websearch": [
        "qwen-provider.qwen3-coder-plus"
      ]
    },
    "dryRun": {
      "enabled": false,
      "includeLoadBalancerDetails": false,
      "includeHealthStatus": false,
      "includeWeightCalculation": false,
      "simulateProviderHealth": false
    },
    "llmSwitch": {
      "type": "llmswitch-unified",
      "config": {
        "protocolDetection": "endpoint-based",
        "defaultProtocol": "openai",
        "endpointMapping": {
          "anthropic": [
            "/v1/anthropic/messages",
            "/v1/messages"
          ],
          "openai": [
            "/v1/chat/completions",
            "/v1/completions"
          ]
        }
      }
    }
  },
  "pipelineConfigs": {
    "endpoint-based": {
      "/v1/messages": {
        "llmSwitch": {
          "type": "llmswitch-anthropic-openai",
          "config": {}
        },
        "workflow": {
          "type": "streaming-control",
          "enabled": true,
          "config": {
            "enableStreaming": true,
            "reasoningPolicy": {
              "anthropic": {
                "disposition": "drop",
                "strict": true
              }
            }
          }
        }
      },
      "/v1/chat/completions": {
        "workflow": {
          "type": "streaming-control",
          "enabled": true,
          "config": {
            "enableStreaming": true,
            "reasoningPolicy": {
              "openai": {
                "disposition": "keep"
              }
            }
          }
        }
      },
      "qwen-provider.qwen3-coder-plus": {
        "llmSwitch": {
          "type": "llmswitch-unified",
          "enabled": true,
          "config": {}
        },
        "compatibility": {
          "type": "qwen-compatibility",
          "enabled": true,
          "config": {
            "toolsEnabled": true,
            "streamingEnabled": true
          }
        }
      },
      "qwen-provider.qwen3-4b-thinking-2507-mlx": {
        "llmSwitch": {
          "type": "llmswitch-unified",
          "enabled": true,
          "config": {}
        },
        "compatibility": {
          "type": "qwen-compatibility",
          "enabled": true,
          "config": {
            "toolsEnabled": true,
            "streamingEnabled": true
          }
        }
      },
      "qwen-provider.qwen3-30b-a3b-instruct-2507-mlx": {
        "llmSwitch": {
          "type": "llmswitch-unified",
          "enabled": true,
          "config": {}
        },
        "compatibility": {
          "type": "qwen-compatibility",
          "enabled": true,
          "config": {
            "toolsEnabled": true,
            "streamingEnabled": true
          }
        }
      },
      "qwen-provider.qwen3-coder-480b-a35b-instruct-mlx": {
        "llmSwitch": {
          "type": "llmswitch-unified",
          "enabled": true,
          "config": {}
        },
        "compatibility": {
          "type": "qwen-compatibility",
          "enabled": true,
          "config": {
            "toolsEnabled": true,
            "streamingEnabled": true
          }
        }
      }
    }
  },
  "schemaVersion": "1.0.0",
  "stableSorting": {
    "enabled": true,
    "sortKeyMappings": true,
    "sortProviders": true,
    "sortRouting": true
  }
}
